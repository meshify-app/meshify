{"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/index.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/index.js","statementMap":{"0":{"start":{"line":3,"column":18},"end":{"line":3,"column":41}},"1":{"start":{"line":5,"column":14},"end":{"line":5,"column":33}},"2":{"start":{"line":7,"column":13},"end":{"line":7,"column":45}},"3":{"start":{"line":9,"column":12},"end":{"line":9,"column":42}},"4":{"start":{"line":11,"column":15},"end":{"line":11,"column":48}},"5":{"start":{"line":13,"column":11},"end":{"line":13,"column":40}},"6":{"start":{"line":15,"column":16},"end":{"line":15,"column":50}},"7":{"start":{"line":17,"column":40},"end":{"line":17,"column":267}},"8":{"start":{"line":17,"column":69},"end":{"line":17,"column":80}},"9":{"start":{"line":17,"column":103},"end":{"line":17,"column":105}},"10":{"start":{"line":17,"column":107},"end":{"line":17,"column":228}},"11":{"start":{"line":17,"column":126},"end":{"line":17,"column":226}},"12":{"start":{"line":17,"column":149},"end":{"line":17,"column":224}},"13":{"start":{"line":17,"column":201},"end":{"line":17,"column":224}},"14":{"start":{"line":17,"column":229},"end":{"line":17,"column":250}},"15":{"start":{"line":17,"column":251},"end":{"line":17,"column":265}},"16":{"start":{"line":19,"column":0},"end":{"line":21,"column":2}},"17":{"start":{"line":20,"column":2},"end":{"line":20,"column":45}},"18":{"start":{"line":23,"column":0},"end":{"line":23,"column":52}},"19":{"start":{"line":24,"column":0},"end":{"line":24,"column":44}},"20":{"start":{"line":25,"column":0},"end":{"line":25,"column":62}},"21":{"start":{"line":26,"column":0},"end":{"line":26,"column":72}},"22":{"start":{"line":28,"column":0},"end":{"line":28,"column":60}},"23":{"start":{"line":29,"column":0},"end":{"line":29,"column":47}},"24":{"start":{"line":30,"column":0},"end":{"line":30,"column":57}},"25":{"start":{"line":31,"column":0},"end":{"line":31,"column":48}},"26":{"start":{"line":32,"column":0},"end":{"line":32,"column":63}}},"fnMap":{"0":{"name":"_interopRequireWildcard","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":32}},"loc":{"start":{"line":17,"column":38},"end":{"line":17,"column":269}},"line":17},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":17},"end":{"line":19,"column":18}},"loc":{"start":{"line":19,"column":36},"end":{"line":21,"column":1}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":267}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":267}},{"start":{"line":17,"column":40},"end":{"line":17,"column":267}}],"line":17},"1":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":65}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":47}},{"start":{"line":17,"column":51},"end":{"line":17,"column":65}}],"line":17},"2":{"loc":{"start":{"line":17,"column":107},"end":{"line":17,"column":228}},"type":"if","locations":[{"start":{"line":17,"column":107},"end":{"line":17,"column":228}},{"start":{"line":17,"column":107},"end":{"line":17,"column":228}}],"line":17},"3":{"loc":{"start":{"line":17,"column":149},"end":{"line":17,"column":224}},"type":"if","locations":[{"start":{"line":17,"column":149},"end":{"line":17,"column":224}},{"start":{"line":17,"column":149},"end":{"line":17,"column":224}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1},"f":{"0":1,"1":0},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["errors","module","exports","options","JwksClient","ArgumentError","JwksError","JwksRateLimitError","SigningKeyNotFoundError","expressJwtSecret","hapiJwt2Key","hapiJwt2KeyAsync","koaJwtSecret","passportJwtSecret"],"mappings":";;AAAA;;AAEA;;IAAYA,M;;AACZ;;AACA;;AACA;;AACA;;;;AAEAC,OAAOC,OAAP,GAAiB,UAACC,OAAD,EAAa;AAC5B,SAAO,IAAIC,sBAAJ,CAAeD,OAAf,CAAP;AACD,CAFD;;AAIAF,OAAOC,OAAP,CAAeG,aAAf,GAA+BL,OAAOK,aAAtC;AACAJ,OAAOC,OAAP,CAAeI,SAAf,GAA2BN,OAAOM,SAAlC;AACAL,OAAOC,OAAP,CAAeK,kBAAf,GAAoCP,OAAOO,kBAA3C;AACAN,OAAOC,OAAP,CAAeM,uBAAf,GAAyCR,OAAOQ,uBAAhD;;AAEAP,OAAOC,OAAP,CAAeO,gBAAf,GAAkCA,yBAAlC;AACAR,OAAOC,OAAP,CAAeQ,WAAf,GAA6BA,iBAA7B;AACAT,OAAOC,OAAP,CAAeS,gBAAf,GAAkCA,sBAAlC;AACAV,OAAOC,OAAP,CAAeU,YAAf,GAA8BA,iBAA9B;AACAX,OAAOC,OAAP,CAAeW,iBAAf,GAAmCA,2BAAnC","file":"index.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src","sourcesContent":["import { JwksClient } from './JwksClient';\n\nimport * as errors from './errors';\nimport { hapiJwt2Key, hapiJwt2KeyAsync } from './integrations/hapi';\nimport { expressJwtSecret } from './integrations/express';\nimport { koaJwtSecret } from './integrations/koa';\nimport { passportJwtSecret } from './integrations/passport';\n\nmodule.exports = (options) => {\n  return new JwksClient(options);\n};\n\nmodule.exports.ArgumentError = errors.ArgumentError;\nmodule.exports.JwksError = errors.JwksError;\nmodule.exports.JwksRateLimitError = errors.JwksRateLimitError;\nmodule.exports.SigningKeyNotFoundError = errors.SigningKeyNotFoundError;\n\nmodule.exports.expressJwtSecret = expressJwtSecret;\nmodule.exports.hapiJwt2Key = hapiJwt2Key;\nmodule.exports.hapiJwt2KeyAsync = hapiJwt2KeyAsync;\nmodule.exports.koaJwtSecret = koaJwtSecret;\nmodule.exports.passportJwtSecret = passportJwtSecret;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"28d87a2d5de34c057ee9c06ad46300c7bcb46be7","contentHash":"7d4b31caccb1a22212d642dc4ba5fd007834c1f71bd1766c041249cf422e0cee"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/JwksClient.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/JwksClient.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":256}},"3":{"start":{"line":8,"column":52},"end":{"line":8,"column":239}},"4":{"start":{"line":8,"column":65},"end":{"line":8,"column":66}},"5":{"start":{"line":8,"column":110},"end":{"line":8,"column":122}},"6":{"start":{"line":8,"column":124},"end":{"line":8,"column":237}},"7":{"start":{"line":8,"column":150},"end":{"line":8,"column":235}},"8":{"start":{"line":8,"column":207},"end":{"line":8,"column":233}},"9":{"start":{"line":8,"column":240},"end":{"line":8,"column":254}},"10":{"start":{"line":10,"column":19},"end":{"line":10,"column":563}},"11":{"start":{"line":10,"column":76},"end":{"line":10,"column":347}},"12":{"start":{"line":10,"column":89},"end":{"line":10,"column":90}},"13":{"start":{"line":10,"column":134},"end":{"line":10,"column":142}},"14":{"start":{"line":10,"column":144},"end":{"line":10,"column":199}},"15":{"start":{"line":10,"column":200},"end":{"line":10,"column":231}},"16":{"start":{"line":10,"column":232},"end":{"line":10,"column":286}},"17":{"start":{"line":10,"column":259},"end":{"line":10,"column":286}},"18":{"start":{"line":10,"column":287},"end":{"line":10,"column":345}},"19":{"start":{"line":10,"column":350},"end":{"line":10,"column":559}},"20":{"start":{"line":10,"column":407},"end":{"line":10,"column":475}},"21":{"start":{"line":10,"column":423},"end":{"line":10,"column":475}},"22":{"start":{"line":10,"column":476},"end":{"line":10,"column":536}},"23":{"start":{"line":10,"column":493},"end":{"line":10,"column":536}},"24":{"start":{"line":10,"column":537},"end":{"line":10,"column":556}},"25":{"start":{"line":12,"column":13},"end":{"line":12,"column":29}},"26":{"start":{"line":14,"column":14},"end":{"line":14,"column":44}},"27":{"start":{"line":16,"column":15},"end":{"line":16,"column":33}},"28":{"start":{"line":18,"column":16},"end":{"line":18,"column":48}},"29":{"start":{"line":20,"column":21},"end":{"line":20,"column":54}},"30":{"start":{"line":22,"column":22},"end":{"line":22,"column":60}},"31":{"start":{"line":24,"column":17},"end":{"line":24,"column":46}},"32":{"start":{"line":26,"column":18},"end":{"line":26,"column":52}},"33":{"start":{"line":28,"column":31},"end":{"line":28,"column":74}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":80}},"35":{"start":{"line":32,"column":13},"end":{"line":32,"column":31}},"36":{"start":{"line":34,"column":16},"end":{"line":34,"column":37}},"37":{"start":{"line":36,"column":39},"end":{"line":36,"column":93}},"38":{"start":{"line":38,"column":50},"end":{"line":38,"column":151}},"39":{"start":{"line":38,"column":92},"end":{"line":38,"column":149}},"40":{"start":{"line":40,"column":17},"end":{"line":163,"column":3}},"41":{"start":{"line":42,"column":16},"end":{"line":42,"column":20}},"42":{"start":{"line":44,"column":4},"end":{"line":44,"column":38}},"43":{"start":{"line":46,"column":4},"end":{"line":64,"column":6}},"44":{"start":{"line":47,"column":6},"end":{"line":47,"column":63}},"45":{"start":{"line":49,"column":6},"end":{"line":63,"column":9}},"46":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"47":{"start":{"line":51,"column":10},"end":{"line":51,"column":25}},"48":{"start":{"line":54,"column":18},"end":{"line":56,"column":10}},"49":{"start":{"line":55,"column":10},"end":{"line":55,"column":31}},"50":{"start":{"line":57,"column":8},"end":{"line":62,"column":9}},"51":{"start":{"line":58,"column":10},"end":{"line":58,"column":31}},"52":{"start":{"line":60,"column":10},"end":{"line":60,"column":84}},"53":{"start":{"line":61,"column":10},"end":{"line":61,"column":120}},"54":{"start":{"line":66,"column":4},"end":{"line":70,"column":16}},"55":{"start":{"line":71,"column":4},"end":{"line":71,"column":47}},"56":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"57":{"start":{"line":75,"column":6},"end":{"line":75,"column":77}},"58":{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},"59":{"start":{"line":78,"column":6},"end":{"line":78,"column":73}},"60":{"start":{"line":82,"column":2},"end":{"line":160,"column":6}},"61":{"start":{"line":85,"column":19},"end":{"line":85,"column":23}},"62":{"start":{"line":87,"column":6},"end":{"line":87,"column":73}},"63":{"start":{"line":88,"column":6},"end":{"line":105,"column":9}},"64":{"start":{"line":95,"column":8},"end":{"line":101,"column":9}},"65":{"start":{"line":96,"column":10},"end":{"line":96,"column":60}},"66":{"start":{"line":97,"column":10},"end":{"line":99,"column":11}},"67":{"start":{"line":98,"column":12},"end":{"line":98,"column":146}},"68":{"start":{"line":100,"column":10},"end":{"line":100,"column":25}},"69":{"start":{"line":103,"column":8},"end":{"line":103,"column":46}},"70":{"start":{"line":104,"column":8},"end":{"line":104,"column":39}},"71":{"start":{"line":110,"column":19},"end":{"line":110,"column":23}},"72":{"start":{"line":112,"column":6},"end":{"line":158,"column":9}},"73":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"74":{"start":{"line":114,"column":10},"end":{"line":114,"column":25}},"75":{"start":{"line":117,"column":8},"end":{"line":119,"column":9}},"76":{"start":{"line":118,"column":10},"end":{"line":118,"column":91}},"77":{"start":{"line":121,"column":26},"end":{"line":150,"column":10}},"78":{"start":{"line":122,"column":10},"end":{"line":124,"column":11}},"79":{"start":{"line":123,"column":12},"end":{"line":123,"column":25}},"80":{"start":{"line":125,"column":10},"end":{"line":127,"column":11}},"81":{"start":{"line":126,"column":12},"end":{"line":126,"column":25}},"82":{"start":{"line":128,"column":10},"end":{"line":130,"column":11}},"83":{"start":{"line":129,"column":12},"end":{"line":129,"column":25}},"84":{"start":{"line":131,"column":10},"end":{"line":131,"column":61}},"85":{"start":{"line":133,"column":20},"end":{"line":136,"column":11}},"86":{"start":{"line":137,"column":36},"end":{"line":137,"column":61}},"87":{"start":{"line":138,"column":10},"end":{"line":148,"column":11}},"88":{"start":{"line":139,"column":12},"end":{"line":139,"column":62}},"89":{"start":{"line":140,"column":12},"end":{"line":142,"column":14}},"90":{"start":{"line":141,"column":14},"end":{"line":141,"column":35}},"91":{"start":{"line":144,"column":12},"end":{"line":144,"column":75}},"92":{"start":{"line":145,"column":12},"end":{"line":147,"column":14}},"93":{"start":{"line":146,"column":14},"end":{"line":146,"column":38}},"94":{"start":{"line":149,"column":10},"end":{"line":149,"column":21}},"95":{"start":{"line":152,"column":8},"end":{"line":154,"column":9}},"96":{"start":{"line":153,"column":10},"end":{"line":153,"column":99}},"97":{"start":{"line":156,"column":8},"end":{"line":156,"column":52}},"98":{"start":{"line":157,"column":8},"end":{"line":157,"column":37}},"99":{"start":{"line":162,"column":2},"end":{"line":162,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":32},"end":{"line":8,"column":33}},"loc":{"start":{"line":8,"column":50},"end":{"line":8,"column":256}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":19},"end":{"line":10,"column":20}},"loc":{"start":{"line":10,"column":31},"end":{"line":10,"column":561}},"line":10},"2":{"name":"defineProperties","decl":{"start":{"line":10,"column":42},"end":{"line":10,"column":58}},"loc":{"start":{"line":10,"column":74},"end":{"line":10,"column":349}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":10,"column":357},"end":{"line":10,"column":358}},"loc":{"start":{"line":10,"column":405},"end":{"line":10,"column":558}},"line":10},"4":{"name":"_interopRequireDefault","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":31}},"loc":{"start":{"line":36,"column":37},"end":{"line":36,"column":95}},"line":36},"5":{"name":"_classCallCheck","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":48},"end":{"line":38,"column":153}},"line":38},"6":{"name":"(anonymous_6)","decl":{"start":{"line":40,"column":38},"end":{"line":40,"column":39}},"loc":{"start":{"line":40,"column":50},"end":{"line":163,"column":1}},"line":40},"7":{"name":"JwksClient","decl":{"start":{"line":41,"column":11},"end":{"line":41,"column":21}},"loc":{"start":{"line":41,"column":31},"end":{"line":80,"column":3}},"line":41},"8":{"name":"(anonymous_8)","decl":{"start":{"line":46,"column":25},"end":{"line":46,"column":26}},"loc":{"start":{"line":46,"column":44},"end":{"line":64,"column":5}},"line":46},"9":{"name":"(anonymous_9)","decl":{"start":{"line":49,"column":27},"end":{"line":49,"column":28}},"loc":{"start":{"line":49,"column":48},"end":{"line":63,"column":7}},"line":49},"10":{"name":"(anonymous_10)","decl":{"start":{"line":54,"column":28},"end":{"line":54,"column":29}},"loc":{"start":{"line":54,"column":41},"end":{"line":56,"column":9}},"line":54},"11":{"name":"getKeys","decl":{"start":{"line":84,"column":20},"end":{"line":84,"column":27}},"loc":{"start":{"line":84,"column":32},"end":{"line":106,"column":5}},"line":84},"12":{"name":"(anonymous_12)","decl":{"start":{"line":94,"column":9},"end":{"line":94,"column":10}},"loc":{"start":{"line":94,"column":29},"end":{"line":105,"column":7}},"line":94},"13":{"name":"getSigningKeys","decl":{"start":{"line":109,"column":20},"end":{"line":109,"column":34}},"loc":{"start":{"line":109,"column":39},"end":{"line":159,"column":5}},"line":109},"14":{"name":"(anonymous_14)","decl":{"start":{"line":112,"column":19},"end":{"line":112,"column":20}},"loc":{"start":{"line":112,"column":40},"end":{"line":158,"column":7}},"line":112},"15":{"name":"(anonymous_15)","decl":{"start":{"line":121,"column":38},"end":{"line":121,"column":39}},"loc":{"start":{"line":121,"column":53},"end":{"line":132,"column":9}},"line":121},"16":{"name":"(anonymous_16)","decl":{"start":{"line":132,"column":15},"end":{"line":132,"column":16}},"loc":{"start":{"line":132,"column":30},"end":{"line":150,"column":9}},"line":132},"17":{"name":"(anonymous_17)","decl":{"start":{"line":140,"column":31},"end":{"line":140,"column":32}},"loc":{"start":{"line":140,"column":43},"end":{"line":142,"column":13}},"line":140},"18":{"name":"(anonymous_18)","decl":{"start":{"line":145,"column":31},"end":{"line":145,"column":32}},"loc":{"start":{"line":145,"column":43},"end":{"line":147,"column":13}},"line":145}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":256}},"type":"binary-expr","locations":[{"start":{"line":8,"column":15},"end":{"line":8,"column":28}},{"start":{"line":8,"column":32},"end":{"line":8,"column":256}}],"line":8},"1":{"loc":{"start":{"line":8,"column":150},"end":{"line":8,"column":235}},"type":"if","locations":[{"start":{"line":8,"column":150},"end":{"line":8,"column":235}},{"start":{"line":8,"column":150},"end":{"line":8,"column":235}}],"line":8},"2":{"loc":{"start":{"line":10,"column":168},"end":{"line":10,"column":198}},"type":"binary-expr","locations":[{"start":{"line":10,"column":168},"end":{"line":10,"column":189}},{"start":{"line":10,"column":193},"end":{"line":10,"column":198}}],"line":10},"3":{"loc":{"start":{"line":10,"column":232},"end":{"line":10,"column":286}},"type":"if","locations":[{"start":{"line":10,"column":232},"end":{"line":10,"column":286}},{"start":{"line":10,"column":232},"end":{"line":10,"column":286}}],"line":10},"4":{"loc":{"start":{"line":10,"column":407},"end":{"line":10,"column":475}},"type":"if","locations":[{"start":{"line":10,"column":407},"end":{"line":10,"column":475}},{"start":{"line":10,"column":407},"end":{"line":10,"column":475}}],"line":10},"5":{"loc":{"start":{"line":10,"column":476},"end":{"line":10,"column":536}},"type":"if","locations":[{"start":{"line":10,"column":476},"end":{"line":10,"column":536}},{"start":{"line":10,"column":476},"end":{"line":10,"column":536}}],"line":10},"6":{"loc":{"start":{"line":36,"column":46},"end":{"line":36,"column":92}},"type":"cond-expr","locations":[{"start":{"line":36,"column":70},"end":{"line":36,"column":73}},{"start":{"line":36,"column":76},"end":{"line":36,"column":92}}],"line":36},"7":{"loc":{"start":{"line":36,"column":46},"end":{"line":36,"column":67}},"type":"binary-expr","locations":[{"start":{"line":36,"column":46},"end":{"line":36,"column":49}},{"start":{"line":36,"column":53},"end":{"line":36,"column":67}}],"line":36},"8":{"loc":{"start":{"line":38,"column":50},"end":{"line":38,"column":151}},"type":"if","locations":[{"start":{"line":38,"column":50},"end":{"line":38,"column":151}},{"start":{"line":38,"column":50},"end":{"line":38,"column":151}}],"line":38},"9":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},{"start":{"line":50,"column":8},"end":{"line":52,"column":9}}],"line":50},"10":{"loc":{"start":{"line":57,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":57,"column":8},"end":{"line":62,"column":9}},{"start":{"line":57,"column":8},"end":{"line":62,"column":9}}],"line":57},"11":{"loc":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},{"start":{"line":74,"column":4},"end":{"line":76,"column":5}}],"line":74},"12":{"loc":{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},{"start":{"line":77,"column":4},"end":{"line":79,"column":5}}],"line":77},"13":{"loc":{"start":{"line":95,"column":8},"end":{"line":101,"column":9}},"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":101,"column":9}},{"start":{"line":95,"column":8},"end":{"line":101,"column":9}}],"line":95},"14":{"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":64}},"type":"binary-expr","locations":[{"start":{"line":95,"column":12},"end":{"line":95,"column":15}},{"start":{"line":95,"column":19},"end":{"line":95,"column":39}},{"start":{"line":95,"column":43},"end":{"line":95,"column":64}}],"line":95},"15":{"loc":{"start":{"line":96,"column":36},"end":{"line":96,"column":58}},"type":"binary-expr","locations":[{"start":{"line":96,"column":36},"end":{"line":96,"column":39}},{"start":{"line":96,"column":43},"end":{"line":96,"column":51}},{"start":{"line":96,"column":55},"end":{"line":96,"column":58}}],"line":96},"16":{"loc":{"start":{"line":97,"column":10},"end":{"line":99,"column":11}},"type":"if","locations":[{"start":{"line":97,"column":10},"end":{"line":99,"column":11}},{"start":{"line":97,"column":10},"end":{"line":99,"column":11}}],"line":97},"17":{"loc":{"start":{"line":98,"column":46},"end":{"line":98,"column":143}},"type":"binary-expr","locations":[{"start":{"line":98,"column":46},"end":{"line":98,"column":54}},{"start":{"line":98,"column":59},"end":{"line":98,"column":75}},{"start":{"line":98,"column":79},"end":{"line":98,"column":87}},{"start":{"line":98,"column":92},"end":{"line":98,"column":109}},{"start":{"line":98,"column":113},"end":{"line":98,"column":143}}],"line":98},"18":{"loc":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},{"start":{"line":113,"column":8},"end":{"line":115,"column":9}}],"line":113},"19":{"loc":{"start":{"line":117,"column":8},"end":{"line":119,"column":9}},"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":119,"column":9}},{"start":{"line":117,"column":8},"end":{"line":119,"column":9}}],"line":117},"20":{"loc":{"start":{"line":117,"column":12},"end":{"line":117,"column":33}},"type":"binary-expr","locations":[{"start":{"line":117,"column":12},"end":{"line":117,"column":17}},{"start":{"line":117,"column":21},"end":{"line":117,"column":33}}],"line":117},"21":{"loc":{"start":{"line":122,"column":10},"end":{"line":124,"column":11}},"type":"if","locations":[{"start":{"line":122,"column":10},"end":{"line":124,"column":11}},{"start":{"line":122,"column":10},"end":{"line":124,"column":11}}],"line":122},"22":{"loc":{"start":{"line":125,"column":10},"end":{"line":127,"column":11}},"type":"if","locations":[{"start":{"line":125,"column":10},"end":{"line":127,"column":11}},{"start":{"line":125,"column":10},"end":{"line":127,"column":11}}],"line":125},"23":{"loc":{"start":{"line":128,"column":10},"end":{"line":130,"column":11}},"type":"if","locations":[{"start":{"line":128,"column":10},"end":{"line":130,"column":11}},{"start":{"line":128,"column":10},"end":{"line":130,"column":11}}],"line":128},"24":{"loc":{"start":{"line":128,"column":14},"end":{"line":128,"column":60}},"type":"binary-expr","locations":[{"start":{"line":128,"column":14},"end":{"line":128,"column":39}},{"start":{"line":128,"column":43},"end":{"line":128,"column":60}}],"line":128},"25":{"loc":{"start":{"line":131,"column":17},"end":{"line":131,"column":60}},"type":"binary-expr","locations":[{"start":{"line":131,"column":17},"end":{"line":131,"column":24}},{"start":{"line":131,"column":28},"end":{"line":131,"column":42}},{"start":{"line":131,"column":46},"end":{"line":131,"column":51}},{"start":{"line":131,"column":55},"end":{"line":131,"column":60}}],"line":131},"26":{"loc":{"start":{"line":137,"column":36},"end":{"line":137,"column":61}},"type":"binary-expr","locations":[{"start":{"line":137,"column":36},"end":{"line":137,"column":43}},{"start":{"line":137,"column":47},"end":{"line":137,"column":61}}],"line":137},"27":{"loc":{"start":{"line":138,"column":10},"end":{"line":148,"column":11}},"type":"if","locations":[{"start":{"line":138,"column":10},"end":{"line":148,"column":11}},{"start":{"line":138,"column":10},"end":{"line":148,"column":11}}],"line":138},"28":{"loc":{"start":{"line":152,"column":8},"end":{"line":154,"column":9}},"type":"if","locations":[{"start":{"line":152,"column":8},"end":{"line":154,"column":9}},{"start":{"line":152,"column":8},"end":{"line":154,"column":9}}],"line":152}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":1,"13":2,"14":2,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":1,"22":1,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":5,"38":39,"39":0,"40":1,"41":39,"42":39,"43":39,"44":22,"45":22,"46":22,"47":1,"48":21,"49":22,"50":21,"51":10,"52":11,"53":11,"54":39,"55":39,"56":39,"57":2,"58":39,"59":38,"60":1,"61":33,"62":33,"63":33,"64":33,"65":4,"66":4,"67":2,"68":2,"69":29,"70":29,"71":27,"72":27,"73":27,"74":2,"75":25,"76":0,"77":25,"78":32,"79":2,"80":30,"81":0,"82":30,"83":1,"84":29,"85":29,"86":29,"87":29,"88":25,"89":25,"90":3,"91":4,"92":4,"93":4,"94":29,"95":25,"96":1,"97":24,"98":24,"99":1},"f":{"0":0,"1":1,"2":1,"3":1,"4":5,"5":39,"6":1,"7":39,"8":22,"9":22,"10":22,"11":33,"12":33,"13":27,"14":27,"15":32,"16":29,"17":3,"18":4},"b":{"0":[1,0],"1":[0,0],"2":[2,2],"3":[2,0],"4":[1,0],"5":[0,1],"6":[0,5],"7":[5,5],"8":[0,39],"9":[1,21],"10":[10,11],"11":[2,37],"12":[38,1],"13":[4,29],"14":[33,31,31],"15":[4,2,2],"16":[2,2],"17":[2,2,2,0,0],"18":[2,25],"19":[0,25],"20":[25,25],"21":[2,30],"22":[0,30],"23":[1,29],"24":[30,29],"25":[29,25,4,4],"26":[29,25],"27":[25,4],"28":[1,24]},"inputSourceMap":{"version":3,"sources":["JwksClient.js"],"names":["JwksClient","options","getSigningKey","kid","cb","logger","getSigningKeys","err","keys","key","find","k","SigningKeyNotFoundError","rateLimit","cache","strictSsl","jwksUri","json","uri","strictSSL","headers","requestHeaders","agentOptions","requestAgentOptions","res","statusCode","body","JwksError","message","statusMessage","getKeys","length","signingKeys","filter","kty","hasOwnProperty","use","x5c","n","e","map","jwk","nbf","hasCertificateChain","publicKey","getPublicKey","rsaPublicKey"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;AAIA;;;;;;IAKaA,U,WAAAA,U;AACX,sBAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AAAA,SAwFrBC,aAxFqB,GAwFL,UAACC,GAAD,EAAMC,EAAN,EAAa;AAC3B,YAAKC,MAAL,iCAAyCF,GAAzC;;AAEA,YAAKG,cAAL,CAAoB,UAACC,GAAD,EAAMC,IAAN,EAAe;AACjC,YAAID,GAAJ,EAAS;AACP,iBAAOH,GAAGG,GAAH,CAAP;AACD;;AAED,YAAME,MAAMD,KAAKE,IAAL,CAAU;AAAA,iBAAKC,EAAER,GAAF,KAAUA,GAAf;AAAA,SAAV,CAAZ;AACA,YAAIM,GAAJ,EAAS;AACP,iBAAOL,GAAG,IAAH,EAASK,GAAT,CAAP;AACD,SAFD,MAEO;AACL,gBAAKJ,MAAL,kDAA0DF,GAA1D;AACA,iBAAOC,GAAG,IAAIQ,iCAAJ,kDAA0ET,GAA1E,QAAH,CAAP;AACD;AACF,OAZD;AAaD,KAxGoB;;AACnB,SAAKF,OAAL;AACEY,iBAAW,KADb;AAEEC,aAAO,IAFT;AAGEC,iBAAW;AAHb,OAIKd,OAJL;AAMA,SAAKI,MAAL,GAAc,qBAAM,MAAN,CAAd;;AAEA;AACA,QAAI,KAAKJ,OAAL,CAAaY,SAAjB,EAA4B;AAC1B,WAAKX,aAAL,GAAqB,mCAAoB,IAApB,EAA0BD,OAA1B,CAArB;AACD;AACD,QAAI,KAAKA,OAAL,CAAaa,KAAjB,EAAwB;AACtB,WAAKZ,aAAL,GAAqB,+BAAgB,IAAhB,EAAsBD,OAAtB,CAArB;AACD;AACF;;;;4BAEOG,E,EAAI;AAAA;;AACV,WAAKC,MAAL,2BAAmC,KAAKJ,OAAL,CAAae,OAAhD;AACA,6BAAQ;AACNC,cAAM,IADA;AAENC,aAAK,KAAKjB,OAAL,CAAae,OAFZ;AAGNG,mBAAW,KAAKlB,OAAL,CAAac,SAHlB;AAINK,iBAAS,KAAKnB,OAAL,CAAaoB,cAJhB;AAKNC,sBAAc,KAAKrB,OAAL,CAAasB;AALrB,OAAR,EAMG,UAAChB,GAAD,EAAMiB,GAAN,EAAc;AACf,YAAIjB,OAAOiB,IAAIC,UAAJ,GAAiB,GAAxB,IAA+BD,IAAIC,UAAJ,IAAkB,GAArD,EAA0D;AACxD,iBAAKpB,MAAL,CAAY,UAAZ,EAAwBmB,OAAOA,IAAIE,IAAX,IAAmBnB,GAA3C;AACA,cAAIiB,GAAJ,EAAS;AACP,mBAAOpB,GAAG,IAAIuB,mBAAJ,CAAcH,IAAIE,IAAJ,KAAaF,IAAIE,IAAJ,CAASE,OAAT,IAAoBJ,IAAIE,IAArC,KAA8CF,IAAIK,aAAlD,oBAAiFL,IAAIC,UAAnG,CAAH,CAAP;AACD;AACD,iBAAOrB,GAAGG,GAAH,CAAP;AACD;;AAED,eAAKF,MAAL,CAAY,OAAZ,EAAqBmB,IAAIE,IAAJ,CAASlB,IAA9B;AACA,eAAOJ,GAAG,IAAH,EAASoB,IAAIE,IAAJ,CAASlB,IAAlB,CAAP;AACD,OAjBD;AAkBD;;;mCAEcJ,E,EAAI;AAAA;;AACjB,WAAK0B,OAAL,CAAa,UAACvB,GAAD,EAAMC,IAAN,EAAe;AAC1B,YAAID,GAAJ,EAAS;AACP,iBAAOH,GAAGG,GAAH,CAAP;AACD;;AAED,YAAI,CAACC,IAAD,IAAS,CAACA,KAAKuB,MAAnB,EAA2B;AACzB,iBAAO3B,GAAG,IAAIuB,mBAAJ,CAAc,4CAAd,CAAH,CAAP;AACD;;AAED,YAAMK,cAAcxB,KACfyB,MADe,CACR,UAACxB,GAAD,EAAS;AACf,cAAGA,IAAIyB,GAAJ,KAAY,KAAf,EAAqB;AACnB,mBAAO,KAAP;AACD;AACD,cAAG,CAACzB,IAAIN,GAAR,EAAY;AACV,mBAAO,KAAP;AACD;AACD,cAAGM,IAAI0B,cAAJ,CAAmB,KAAnB,KAA6B1B,IAAI2B,GAAJ,KAAY,KAA5C,EAAkD;AAChD,mBAAO,KAAP;AACD;AACD,iBAAS3B,IAAI4B,GAAJ,IAAW5B,IAAI4B,GAAJ,CAAQN,MAApB,IAAgCtB,IAAI6B,CAAJ,IAAS7B,IAAI8B,CAArD;AACH,SAZiB,EAafC,GAbe,CAaX,eAAO;AACV,cAAMC,MAAM;AACVtC,iBAAKM,IAAIN,GADC;AAEVuC,iBAAKjC,IAAIiC;AAFC,WAAZ;AAIA,cAAMC,sBAAsBlC,IAAI4B,GAAJ,IAAW5B,IAAI4B,GAAJ,CAAQN,MAA/C;AACA,cAAIY,mBAAJ,EAAwB;AACtBF,gBAAIG,SAAJ,GAAgB,sBAAUnC,IAAI4B,GAAJ,CAAQ,CAAR,CAAV,CAAhB;AACAI,gBAAII,YAAJ,GAAmB;AAAA,qBAAMJ,IAAIG,SAAV;AAAA,aAAnB;AACD,WAHD,MAGO;AACLH,gBAAIK,YAAJ,GAAmB,8BAAkBrC,IAAI6B,CAAtB,EAAyB7B,IAAI8B,CAA7B,CAAnB;AACAE,gBAAII,YAAJ,GAAmB;AAAA,qBAAMJ,IAAIK,YAAV;AAAA,aAAnB;AACD;AACD,iBAAOL,GAAP;AACH,SA3BiB,CAApB;;AA6BA,YAAI,CAACT,YAAYD,MAAjB,EAAyB;AACvB,iBAAO3B,GAAG,IAAIuB,mBAAJ,CAAc,oDAAd,CAAH,CAAP;AACD;;AAED,eAAKtB,MAAL,CAAY,eAAZ,EAA6B2B,WAA7B;AACA,eAAO5B,GAAG,IAAH,EAAS4B,WAAT,CAAP;AACD,OA5CD;AA6CD","file":"JwksClient.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src","sourcesContent":["import debug from 'debug';\nimport request from 'request';\n\nimport ArgumentError from './errors/ArgumentError';\nimport JwksError from './errors/JwksError';\nimport SigningKeyNotFoundError from './errors/SigningKeyNotFoundError';\n\nimport {\n  certToPEM,\n  rsaPublicKeyToPEM\n} from './utils';\nimport {\n  cacheSigningKey,\n  rateLimitSigningKey\n} from './wrappers';\n\nexport class JwksClient {\n  constructor(options) {\n    this.options = {\n      rateLimit: false,\n      cache: true,\n      strictSsl: true,\n      ...options\n    };\n    this.logger = debug('jwks');\n\n    // Initialize wrappers.\n    if (this.options.rateLimit) {\n      this.getSigningKey = rateLimitSigningKey(this, options);\n    }\n    if (this.options.cache) {\n      this.getSigningKey = cacheSigningKey(this, options);\n    }\n  }\n\n  getKeys(cb) {\n    this.logger(`Fetching keys from '${this.options.jwksUri}'`);\n    request({\n      json: true,\n      uri: this.options.jwksUri,\n      strictSSL: this.options.strictSsl,\n      headers: this.options.requestHeaders,\n      agentOptions: this.options.requestAgentOptions\n    }, (err, res) => {\n      if (err || res.statusCode < 200 || res.statusCode >= 300) {\n        this.logger('Failure:', res && res.body || err);\n        if (res) {\n          return cb(new JwksError(res.body && (res.body.message || res.body) || res.statusMessage || `Http Error ${res.statusCode}`));\n        }\n        return cb(err);\n      }\n\n      this.logger('Keys:', res.body.keys);\n      return cb(null, res.body.keys);\n    });\n  }\n\n  getSigningKeys(cb) {\n    this.getKeys((err, keys) => {\n      if (err) {\n        return cb(err);\n      }\n\n      if (!keys || !keys.length) {\n        return cb(new JwksError('The JWKS endpoint did not contain any keys'));\n      }\n\n      const signingKeys = keys\n          .filter((key) => {\n            if(key.kty !== 'RSA'){\n              return false;\n            }\n            if(!key.kid){\n              return false;\n            }\n            if(key.hasOwnProperty('use') && key.use !== 'sig'){\n              return false;\n            }  \n            return ((key.x5c && key.x5c.length) || (key.n && key.e));\n        })\n          .map(key => {\n            const jwk = {\n              kid: key.kid,\n              nbf: key.nbf\n            };\n            const hasCertificateChain = key.x5c && key.x5c.length;\n            if (hasCertificateChain){\n              jwk.publicKey = certToPEM(key.x5c[0]);\n              jwk.getPublicKey = () => jwk.publicKey;\n            } else {\n              jwk.rsaPublicKey = rsaPublicKeyToPEM(key.n, key.e);\n              jwk.getPublicKey = () => jwk.rsaPublicKey;\n            }\n            return jwk;\n        });\n\n      if (!signingKeys.length) {\n        return cb(new JwksError('The JWKS endpoint did not contain any signing keys'));\n      }\n\n      this.logger('Signing Keys:', signingKeys);\n      return cb(null, signingKeys);\n    });\n  }\n\n  getSigningKey = (kid, cb) => {\n    this.logger(`Fetching signing key for '${kid}'`);\n\n    this.getSigningKeys((err, keys) => {\n      if (err) {\n        return cb(err);\n      }\n\n      const key = keys.find(k => k.kid === kid);\n      if (key) {\n        return cb(null, key);\n      } else {\n        this.logger(`Unable to find a signing key that matches '${kid}'`);\n        return cb(new SigningKeyNotFoundError(`Unable to find a signing key that matches '${kid}'`));\n      }\n    });\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e6f476ac31a203f1c4b2120b92e89afd0a400f6c","contentHash":"469ff7f285cb7b91cd692c2793b1d22f40bcf42536cab88dcd7df29f808e0eac"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/ArgumentError.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/ArgumentError.js","statementMap":{"0":{"start":{"line":4,"column":2},"end":{"line":4,"column":28}},"1":{"start":{"line":5,"column":2},"end":{"line":5,"column":50}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":30}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":25}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":57}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":52}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":31}}},"fnMap":{"0":{"name":"ArgumentError","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":22}},"loc":{"start":{"line":3,"column":32},"end":{"line":8,"column":1}},"line":3}},"branchMap":{},"s":{"0":4,"1":4,"2":4,"3":4,"4":1,"5":1,"6":1},"f":{"0":4},"b":{},"inputSourceMap":{"version":3,"sources":["ArgumentError.js"],"names":["ArgumentError","message","Error","call","captureStackTrace","constructor","name","prototype","Object","create","module","exports"],"mappings":";;AAAA,SAASA,aAAT,CAAuBC,OAAvB,EAAgC;AAC9BC,QAAMC,IAAN,CAAW,IAAX,EAAiBF,OAAjB;AACAC,QAAME,iBAAN,CAAwB,IAAxB,EAA8B,KAAKC,WAAnC;AACA,OAAKC,IAAL,GAAY,eAAZ;AACA,OAAKL,OAAL,GAAeA,OAAf;AACD;;AAEDD,cAAcO,SAAd,GAA0BC,OAAOC,MAAP,CAAcP,MAAMK,SAApB,CAA1B;AACAP,cAAcO,SAAd,CAAwBF,WAAxB,GAAsCL,aAAtC;AACAU,OAAOC,OAAP,GAAiBX,aAAjB","file":"ArgumentError.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors","sourcesContent":["function ArgumentError(message) {\n  Error.call(this, message);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = 'ArgumentError';\n  this.message = message;\n}\n\nArgumentError.prototype = Object.create(Error.prototype);\nArgumentError.prototype.constructor = ArgumentError;\nmodule.exports = ArgumentError;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3c659157b52c0099f32791916e50732c1e8a493f","contentHash":"d5ad22e979a1c3bd6015f2cb4a0b7710339d2922483026aebd3fd5577d8d4bbd"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/JwksError.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/JwksError.js","statementMap":{"0":{"start":{"line":4,"column":2},"end":{"line":4,"column":28}},"1":{"start":{"line":5,"column":2},"end":{"line":5,"column":50}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":26}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":25}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":53}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":44}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":27}}},"fnMap":{"0":{"name":"JwksError","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":28},"end":{"line":8,"column":1}},"line":3}},"branchMap":{},"s":{"0":4,"1":4,"2":4,"3":4,"4":1,"5":1,"6":1},"f":{"0":4},"b":{},"inputSourceMap":{"version":3,"sources":["JwksError.js"],"names":["JwksError","message","Error","call","captureStackTrace","constructor","name","prototype","Object","create","module","exports"],"mappings":";;AAAA,SAASA,SAAT,CAAmBC,OAAnB,EAA4B;AAC1BC,QAAMC,IAAN,CAAW,IAAX,EAAiBF,OAAjB;AACAC,QAAME,iBAAN,CAAwB,IAAxB,EAA8B,KAAKC,WAAnC;AACA,OAAKC,IAAL,GAAY,WAAZ;AACA,OAAKL,OAAL,GAAeA,OAAf;AACD;;AAEDD,UAAUO,SAAV,GAAsBC,OAAOC,MAAP,CAAcP,MAAMK,SAApB,CAAtB;AACAP,UAAUO,SAAV,CAAoBF,WAApB,GAAkCL,SAAlC;AACAU,OAAOC,OAAP,GAAiBX,SAAjB","file":"JwksError.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors","sourcesContent":["function JwksError(message) {\n  Error.call(this, message);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = 'JwksError';\n  this.message = message;\n}\n\nJwksError.prototype = Object.create(Error.prototype);\nJwksError.prototype.constructor = JwksError;\nmodule.exports = JwksError;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0666d8675cf544ed79bce226450dbb5d51e6f145","contentHash":"4c832167dd9b13d3739837a55763285fa5b1ea69fcd1a878db682679015f2edb"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/SigningKeyNotFoundError.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/SigningKeyNotFoundError.js","statementMap":{"0":{"start":{"line":4,"column":2},"end":{"line":4,"column":28}},"1":{"start":{"line":5,"column":2},"end":{"line":5,"column":50}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":40}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":25}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":67}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":72}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":41}}},"fnMap":{"0":{"name":"SigningKeyNotFoundError","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":32}},"loc":{"start":{"line":3,"column":42},"end":{"line":8,"column":1}},"line":3}},"branchMap":{},"s":{"0":12,"1":12,"2":12,"3":12,"4":1,"5":1,"6":1},"f":{"0":12},"b":{},"inputSourceMap":{"version":3,"sources":["SigningKeyNotFoundError.js"],"names":["SigningKeyNotFoundError","message","Error","call","captureStackTrace","constructor","name","prototype","Object","create","module","exports"],"mappings":";;AAAA,SAASA,uBAAT,CAAiCC,OAAjC,EAA0C;AACxCC,QAAMC,IAAN,CAAW,IAAX,EAAiBF,OAAjB;AACAC,QAAME,iBAAN,CAAwB,IAAxB,EAA8B,KAAKC,WAAnC;AACA,OAAKC,IAAL,GAAY,yBAAZ;AACA,OAAKL,OAAL,GAAeA,OAAf;AACD;;AAEDD,wBAAwBO,SAAxB,GAAoCC,OAAOC,MAAP,CAAcP,MAAMK,SAApB,CAApC;AACAP,wBAAwBO,SAAxB,CAAkCF,WAAlC,GAAgDL,uBAAhD;AACAU,OAAOC,OAAP,GAAiBX,uBAAjB","file":"SigningKeyNotFoundError.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors","sourcesContent":["function SigningKeyNotFoundError(message) {\n  Error.call(this, message);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = 'SigningKeyNotFoundError';\n  this.message = message;\n}\n\nSigningKeyNotFoundError.prototype = Object.create(Error.prototype);\nSigningKeyNotFoundError.prototype.constructor = SigningKeyNotFoundError;\nmodule.exports = SigningKeyNotFoundError;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2b8db9907a6bfa9010dacd407c35059a4dd9ea31","contentHash":"dc778b9b1fae89904a92fd46fa4420e588e766f19f9ff39414193d44db697cb5"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/utils.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/utils.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":46}},"3":{"start":{"line":9,"column":2},"end":{"line":9,"column":43}},"4":{"start":{"line":10,"column":2},"end":{"line":10,"column":82}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":14}},"6":{"start":{"line":15,"column":12},"end":{"line":15,"column":21}},"7":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"8":{"start":{"line":17,"column":4},"end":{"line":17,"column":25}},"9":{"start":{"line":19,"column":2},"end":{"line":19,"column":16}},"10":{"start":{"line":23,"column":13},"end":{"line":23,"column":32}},"11":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"12":{"start":{"line":25,"column":4},"end":{"line":25,"column":22}},"13":{"start":{"line":27,"column":2},"end":{"line":27,"column":14}},"14":{"start":{"line":31,"column":2},"end":{"line":33,"column":3}},"15":{"start":{"line":32,"column":4},"end":{"line":32,"column":20}},"16":{"start":{"line":34,"column":13},"end":{"line":34,"column":21}},"17":{"start":{"line":35,"column":27},"end":{"line":35,"column":48}},"18":{"start":{"line":36,"column":2},"end":{"line":36,"column":42}},"19":{"start":{"line":43,"column":16},"end":{"line":43,"column":48}},"20":{"start":{"line":44,"column":17},"end":{"line":44,"column":50}},"21":{"start":{"line":45,"column":19},"end":{"line":45,"column":56}},"22":{"start":{"line":46,"column":20},"end":{"line":46,"column":58}},"23":{"start":{"line":47,"column":15},"end":{"line":47,"column":36}},"24":{"start":{"line":48,"column":15},"end":{"line":48,"column":37}},"25":{"start":{"line":50,"column":22},"end":{"line":50,"column":45}},"26":{"start":{"line":51,"column":22},"end":{"line":51,"column":45}},"27":{"start":{"line":52,"column":22},"end":{"line":52,"column":192}},"28":{"start":{"line":54,"column":12},"end":{"line":54,"column":63}},"29":{"start":{"line":56,"column":12},"end":{"line":56,"column":46}},"30":{"start":{"line":57,"column":2},"end":{"line":57,"column":47}},"31":{"start":{"line":58,"column":2},"end":{"line":58,"column":44}},"32":{"start":{"line":59,"column":2},"end":{"line":59,"column":13}}},"fnMap":{"0":{"name":"certToPEM","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":18}},"loc":{"start":{"line":8,"column":25},"end":{"line":12,"column":1}},"line":8},"1":{"name":"prepadSigned","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":21}},"loc":{"start":{"line":14,"column":30},"end":{"line":20,"column":1}},"line":14},"2":{"name":"toHex","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":14}},"loc":{"start":{"line":22,"column":23},"end":{"line":28,"column":1}},"line":22},"3":{"name":"encodeLengthHex","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":28},"end":{"line":37,"column":1}},"line":30},"4":{"name":"rsaPublicKeyToPEM","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":26}},"loc":{"start":{"line":42,"column":52},"end":{"line":60,"column":1}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},{"start":{"line":16,"column":2},"end":{"line":18,"column":3}}],"line":16},"1":{"loc":{"start":{"line":16,"column":6},"end":{"line":16,"column":28}},"type":"binary-expr","locations":[{"start":{"line":16,"column":6},"end":{"line":16,"column":15}},{"start":{"line":16,"column":19},"end":{"line":16,"column":28}}],"line":16},"2":{"loc":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},{"start":{"line":24,"column":2},"end":{"line":26,"column":3}}],"line":24},"3":{"loc":{"start":{"line":31,"column":2},"end":{"line":33,"column":3}},"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":33,"column":3}},{"start":{"line":31,"column":2},"end":{"line":33,"column":3}}],"line":31}},"s":{"0":1,"1":1,"2":1,"3":25,"4":25,"5":25,"6":8,"7":8,"8":4,"9":4,"10":20,"11":20,"12":12,"13":8,"14":12,"15":4,"16":8,"17":8,"18":8,"19":4,"20":4,"21":4,"22":4,"23":4,"24":4,"25":4,"26":4,"27":4,"28":4,"29":4,"30":4,"31":4,"32":4},"f":{"0":25,"1":8,"2":20,"3":12,"4":4},"b":{"0":[4,4],"1":[8,8],"2":[12,8],"3":[4,8]},"inputSourceMap":{"version":3,"sources":["utils.js"],"names":["certToPEM","rsaPublicKeyToPEM","cert","match","join","prepadSigned","hexStr","msb","toHex","number","nstr","toString","length","encodeLengthHex","n","nHex","lengthOfLengthByte","modulusB64","exponentB64","modulus","Buffer","exponent","modulusHex","exponentHex","modlen","explen","encodedModlen","encodedExplen","encodedPubkey","der","pem"],"mappings":";;;;;QAAgBA,S,GAAAA,S;QAkCAC,iB,GAAAA,iB;AAlCT,SAASD,SAAT,CAAmBE,IAAnB,EAAyB;AAC9BA,SAAOA,KAAKC,KAAL,CAAW,UAAX,EAAuBC,IAAvB,CAA4B,IAA5B,CAAP;AACAF,2CAAuCA,IAAvC;AACA,SAAOA,IAAP;AACD;;AAED,SAASG,YAAT,CAAsBC,MAAtB,EAA8B;AAC5B,MAAMC,MAAMD,OAAO,CAAP,CAAZ;AACA,MAAIC,MAAM,GAAN,IAAaA,MAAM,GAAvB,EAA4B;AAC1B,kBAAYD,MAAZ;AACD;AACD,SAAOA,MAAP;AACD;;AAED,SAASE,KAAT,CAAeC,MAAf,EAAuB;AACrB,MAAMC,OAAOD,OAAOE,QAAP,CAAgB,EAAhB,CAAb;AACA,MAAID,KAAKE,MAAL,GAAc,CAAlB,EAAqB;AACnB,iBAAWF,IAAX;AACD;AACD,SAAOA,IAAP;AACD;;AAED,SAASG,eAAT,CAAyBC,CAAzB,EAA4B;AAC1B,MAAIA,KAAK,GAAT,EAAc;AACZ,WAAON,MAAMM,CAAN,CAAP;AACD;AACD,MAAMC,OAAOP,MAAMM,CAAN,CAAb;AACA,MAAME,qBAAqB,MAAMD,KAAKH,MAAL,GAAc,CAA/C;AACA,SAAOJ,MAAMQ,kBAAN,IAA4BD,IAAnC;AACD;;AAED;;;AAGO,SAASd,iBAAT,CAA2BgB,UAA3B,EAAuCC,WAAvC,EAAoD;AACzD,MAAMC,UAAU,IAAIC,MAAJ,CAAWH,UAAX,EAAuB,QAAvB,CAAhB;AACA,MAAMI,WAAW,IAAID,MAAJ,CAAWF,WAAX,EAAwB,QAAxB,CAAjB;AACA,MAAMI,aAAajB,aAAac,QAAQR,QAAR,CAAiB,KAAjB,CAAb,CAAnB;AACA,MAAMY,cAAclB,aAAagB,SAASV,QAAT,CAAkB,KAAlB,CAAb,CAApB;AACA,MAAMa,SAASF,WAAWV,MAAX,GAAoB,CAAnC;AACA,MAAMa,SAASF,YAAYX,MAAZ,GAAqB,CAApC;;AAEA,MAAMc,gBAAgBb,gBAAgBW,MAAhB,CAAtB;AACA,MAAMG,gBAAgBd,gBAAgBY,MAAhB,CAAtB;AACA,MAAMG,gBAAgB,OACpBf,gBAAgBW,SAASC,MAAT,GAAkBC,cAAcd,MAAd,GAAuB,CAAzC,GAA6Ce,cAAcf,MAAd,GAAuB,CAApE,GAAwE,CAAxF,CADoB,GAEpB,IAFoB,GAEbc,aAFa,GAEGJ,UAFH,GAGpB,IAHoB,GAGbK,aAHa,GAGGJ,WAHzB;;AAKA,MAAMM,MAAM,IAAIT,MAAJ,CAAWQ,aAAX,EAA0B,KAA1B,EACTjB,QADS,CACA,QADA,CAAZ;;AAGA,MAAImB,wCAAJ;AACAA,cAAUD,IAAI1B,KAAJ,CAAU,UAAV,EAAsBC,IAAtB,CAA2B,IAA3B,CAAV;AACA0B;AACA,SAAOA,GAAP;AACD","file":"utils.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src","sourcesContent":["export function certToPEM(cert) {\n  cert = cert.match(/.{1,64}/g).join('\\n');\n  cert = `-----BEGIN CERTIFICATE-----\\n${cert}\\n-----END CERTIFICATE-----\\n`;\n  return cert;\n};\n\nfunction prepadSigned(hexStr) {\n  const msb = hexStr[0];\n  if (msb < '0' || msb > '7') {\n    return `00${hexStr}`;\n  }\n  return hexStr;\n}\n\nfunction toHex(number) {\n  const nstr = number.toString(16);\n  if (nstr.length % 2) {\n    return `0${nstr}`;\n  }\n  return nstr;\n}\n\nfunction encodeLengthHex(n) {\n  if (n <= 127) {\n    return toHex(n);\n  }\n  const nHex = toHex(n);\n  const lengthOfLengthByte = 128 + nHex.length / 2;\n  return toHex(lengthOfLengthByte) + nHex;\n}\n\n/*\n * Source: http://stackoverflow.com/questions/18835132/xml-to-pem-in-node-js\n */\nexport function rsaPublicKeyToPEM(modulusB64, exponentB64) {\n  const modulus = new Buffer(modulusB64, 'base64');\n  const exponent = new Buffer(exponentB64, 'base64');\n  const modulusHex = prepadSigned(modulus.toString('hex'));\n  const exponentHex = prepadSigned(exponent.toString('hex'));\n  const modlen = modulusHex.length / 2;\n  const explen = exponentHex.length / 2;\n\n  const encodedModlen = encodeLengthHex(modlen);\n  const encodedExplen = encodeLengthHex(explen);\n  const encodedPubkey = '30' +\n    encodeLengthHex(modlen + explen + encodedModlen.length / 2 + encodedExplen.length / 2 + 2) +\n    '02' + encodedModlen + modulusHex +\n    '02' + encodedExplen + exponentHex;\n\n  const der = new Buffer(encodedPubkey, 'hex')\n    .toString('base64');\n\n  let pem = `-----BEGIN RSA PUBLIC KEY-----\\n`;\n  pem += `${der.match(/.{1,64}/g).join('\\n')}`;\n  pem += `\\n-----END RSA PUBLIC KEY-----\\n`;\n  return pem;\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"456d34d0a1f9a8ada113708528a315e707f09ab0","contentHash":"89b7d98df6893792c634538077b2a5f05e145278f653d666cd886009014b4b7b"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers/index.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers/index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":66}},"2":{"start":{"line":8,"column":13},"end":{"line":8,"column":31}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":44}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":39}},"5":{"start":{"line":14,"column":18},"end":{"line":14,"column":52}},"6":{"start":{"line":16,"column":39},"end":{"line":16,"column":93}},"7":{"start":{"line":18,"column":0},"end":{"line":18,"column":42}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":50}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":37},"end":{"line":16,"column":95}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":92}},"type":"cond-expr","locations":[{"start":{"line":16,"column":70},"end":{"line":16,"column":73}},{"start":{"line":16,"column":76},"end":{"line":16,"column":92}}],"line":16},"1":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":67}},"type":"binary-expr","locations":[{"start":{"line":16,"column":46},"end":{"line":16,"column":49}},{"start":{"line":16,"column":53},"end":{"line":16,"column":67}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":1,"8":1},"f":{"0":2},"b":{"0":[2,0],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["cacheSigningKey","rateLimitSigningKey"],"mappings":";;;;;;;;;;;;;;;;;QAAOA,e;QACAC,mB","file":"index.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers","sourcesContent":["export cacheSigningKey from './cache';\nexport rateLimitSigningKey from './rateLimit';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d823e1f5166f05299acd23dbf8b2def9b783aaf8","contentHash":"eef16fc33fcdd4e0ae5ea81056353ce43110f349fbc621ff7b7be98fa96f9306"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers/cache.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers/cache.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":7,"column":0},"end":{"line":35,"column":2}},"2":{"start":{"line":8,"column":13},"end":{"line":8,"column":88}},"3":{"start":{"line":9,"column":29},"end":{"line":9,"column":49}},"4":{"start":{"line":10,"column":24},"end":{"line":10,"column":85}},"5":{"start":{"line":11,"column":25},"end":{"line":11,"column":41}},"6":{"start":{"line":12,"column":20},"end":{"line":12,"column":96}},"7":{"start":{"line":14,"column":15},"end":{"line":14,"column":43}},"8":{"start":{"line":15,"column":22},"end":{"line":15,"column":42}},"9":{"start":{"line":17,"column":2},"end":{"line":17,"column":99}},"10":{"start":{"line":18,"column":2},"end":{"line":34,"column":5}},"11":{"start":{"line":20,"column":6},"end":{"line":27,"column":9}},"12":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"13":{"start":{"line":22,"column":10},"end":{"line":22,"column":31}},"14":{"start":{"line":25,"column":8},"end":{"line":25,"column":64}},"15":{"start":{"line":26,"column":8},"end":{"line":26,"column":35}},"16":{"start":{"line":30,"column":6},"end":{"line":30,"column":17}},"17":{"start":{"line":37,"column":10},"end":{"line":37,"column":23}},"18":{"start":{"line":39,"column":11},"end":{"line":39,"column":38}},"19":{"start":{"line":41,"column":13},"end":{"line":41,"column":29}},"20":{"start":{"line":43,"column":14},"end":{"line":43,"column":44}},"21":{"start":{"line":45,"column":19},"end":{"line":45,"column":42}},"22":{"start":{"line":47,"column":20},"end":{"line":47,"column":56}},"23":{"start":{"line":49,"column":39},"end":{"line":49,"column":93}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":18},"end":{"line":7,"column":19}},"loc":{"start":{"line":7,"column":36},"end":{"line":35,"column":1}},"line":7},"1":{"name":"load","decl":{"start":{"line":19,"column":19},"end":{"line":19,"column":23}},"loc":{"start":{"line":19,"column":39},"end":{"line":28,"column":5}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":25},"end":{"line":20,"column":26}},"loc":{"start":{"line":20,"column":45},"end":{"line":27,"column":7}},"line":20},"3":{"name":"hash","decl":{"start":{"line":29,"column":19},"end":{"line":29,"column":23}},"loc":{"start":{"line":29,"column":29},"end":{"line":31,"column":5}},"line":29},"4":{"name":"_interopRequireDefault","decl":{"start":{"line":49,"column":9},"end":{"line":49,"column":31}},"loc":{"start":{"line":49,"column":37},"end":{"line":49,"column":95}},"line":49}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":88}},"type":"cond-expr","locations":[{"start":{"line":8,"column":66},"end":{"line":8,"column":78}},{"start":{"line":8,"column":81},"end":{"line":8,"column":88}}],"line":8},"1":{"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":63}},"type":"binary-expr","locations":[{"start":{"line":8,"column":13},"end":{"line":8,"column":33}},{"start":{"line":8,"column":37},"end":{"line":8,"column":63}}],"line":8},"2":{"loc":{"start":{"line":10,"column":24},"end":{"line":10,"column":85}},"type":"cond-expr","locations":[{"start":{"line":10,"column":61},"end":{"line":10,"column":62}},{"start":{"line":10,"column":65},"end":{"line":10,"column":85}}],"line":10},"3":{"loc":{"start":{"line":12,"column":20},"end":{"line":12,"column":96}},"type":"cond-expr","locations":[{"start":{"line":12,"column":53},"end":{"line":12,"column":77}},{"start":{"line":12,"column":80},"end":{"line":12,"column":96}}],"line":12},"4":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"5":{"loc":{"start":{"line":49,"column":46},"end":{"line":49,"column":92}},"type":"cond-expr","locations":[{"start":{"line":49,"column":70},"end":{"line":49,"column":73}},{"start":{"line":49,"column":76},"end":{"line":49,"column":92}}],"line":49},"6":{"loc":{"start":{"line":49,"column":46},"end":{"line":49,"column":67}},"type":"binary-expr","locations":[{"start":{"line":49,"column":46},"end":{"line":49,"column":49}},{"start":{"line":49,"column":53},"end":{"line":49,"column":67}}],"line":49}},"s":{"0":1,"1":1,"2":38,"3":38,"4":38,"5":38,"6":38,"7":38,"8":38,"9":38,"10":38,"11":21,"12":21,"13":13,"14":8,"15":8,"16":24,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":3},"f":{"0":38,"1":21,"2":21,"3":24,"4":3},"b":{"0":[38,0],"1":[38,38],"2":[38,0],"3":[38,0],"4":[13,8],"5":[0,3],"6":[3,3]},"inputSourceMap":{"version":3,"sources":["cache.js"],"names":["client","options","cacheMaxEntries","cacheMaxAge","logger","getSigningKey","load","kid","callback","err","key","hash","maxAge","max"],"mappings":";;;;;;kBAIe,UAASA,MAAT,EAA6E;AAAA,iFAATC,OAAS;AAAA,kCAA1DC,eAA0D;AAAA,MAA1DA,eAA0D,wCAAxC,CAAwC;AAAA,8BAArCC,WAAqC;AAAA,MAArCA,WAAqC,oCAAvB,kBAAG,KAAH,CAAuB;;AAC1F,MAAMC,SAAS,qBAAM,MAAN,CAAf;AACA,MAAMC,gBAAgBL,OAAOK,aAA7B;;AAEAD,uDAAmDF,eAAnD,gBAA6EC,WAA7E;AACA,SAAO,2BAAS;AACdG,UAAM,cAACC,GAAD,EAAMC,QAAN,EAAmB;AACvBH,oBAAcE,GAAd,EAAmB,UAACE,GAAD,EAAMC,GAAN,EAAc;AAC/B,YAAID,GAAJ,EAAS;AACP,iBAAOD,SAASC,GAAT,CAAP;AACD;;AAEDL,8CAAmCG,GAAnC,UAA4CG,GAA5C;AACA,eAAOF,SAAS,IAAT,EAAeE,GAAf,CAAP;AACD,OAPD;AAQD,KAVa;AAWdC,UAAM,cAACJ,GAAD;AAAA,aAASA,GAAT;AAAA,KAXQ;AAYdK,YAAQT,WAZM;AAadU,SAAKX;AAbS,GAAT,CAAP;AAeD,C;;AAxBD;;;;AACA;;;;AACA","file":"cache.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers","sourcesContent":["import ms from 'ms';\nimport debug from 'debug';\nimport memoizer from 'lru-memoizer';\n\nexport default function(client, { cacheMaxEntries = 5, cacheMaxAge = ms('10m') } = options) {\n  const logger = debug('jwks');\n  const getSigningKey = client.getSigningKey;\n\n  logger(`Configured caching of singing keys. Max: ${cacheMaxEntries} / Age: ${cacheMaxAge}`);\n  return memoizer({\n    load: (kid, callback) => {\n      getSigningKey(kid, (err, key) => {\n        if (err) {\n          return callback(err);\n        }\n\n        logger(`Caching signing key for '${kid}':`, key);\n        return callback(null, key);\n      });\n    },\n    hash: (kid) => kid,\n    maxAge: cacheMaxAge,\n    max: cacheMaxEntries\n  });\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6afc52999dc50eb65e081460b6343fb3c5ce5adf","contentHash":"7fa151d588ba8e2e89c228492593f490f57a2ad0f74abf45aa7b4c03b142d15d"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers/rateLimit.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers/rateLimit.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":7,"column":0},"end":{"line":33,"column":2}},"2":{"start":{"line":8,"column":13},"end":{"line":8,"column":88}},"3":{"start":{"line":9,"column":30},"end":{"line":9,"column":56}},"4":{"start":{"line":10,"column":30},"end":{"line":10,"column":94}},"5":{"start":{"line":12,"column":15},"end":{"line":12,"column":43}},"6":{"start":{"line":13,"column":22},"end":{"line":13,"column":42}},"7":{"start":{"line":15,"column":16},"end":{"line":15,"column":79}},"8":{"start":{"line":16,"column":2},"end":{"line":16,"column":94}},"9":{"start":{"line":18,"column":2},"end":{"line":32,"column":4}},"10":{"start":{"line":19,"column":4},"end":{"line":31,"column":7}},"11":{"start":{"line":20,"column":6},"end":{"line":22,"column":7}},"12":{"start":{"line":21,"column":8},"end":{"line":21,"column":23}},"13":{"start":{"line":24,"column":6},"end":{"line":24,"column":88}},"14":{"start":{"line":25,"column":6},"end":{"line":30,"column":7}},"15":{"start":{"line":26,"column":8},"end":{"line":26,"column":57}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":94}},"17":{"start":{"line":29,"column":8},"end":{"line":29,"column":38}},"18":{"start":{"line":35,"column":13},"end":{"line":35,"column":29}},"19":{"start":{"line":37,"column":14},"end":{"line":37,"column":44}},"20":{"start":{"line":39,"column":15},"end":{"line":39,"column":33}},"21":{"start":{"line":41,"column":26},"end":{"line":41,"column":65}},"22":{"start":{"line":43,"column":27},"end":{"line":43,"column":70}},"23":{"start":{"line":45,"column":39},"end":{"line":45,"column":93}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":18},"end":{"line":7,"column":19}},"loc":{"start":{"line":7,"column":36},"end":{"line":33,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":10}},"loc":{"start":{"line":18,"column":28},"end":{"line":32,"column":3}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":28},"end":{"line":19,"column":29}},"loc":{"start":{"line":19,"column":54},"end":{"line":31,"column":5}},"line":19},"3":{"name":"_interopRequireDefault","decl":{"start":{"line":45,"column":9},"end":{"line":45,"column":31}},"loc":{"start":{"line":45,"column":37},"end":{"line":45,"column":95}},"line":45}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":88}},"type":"cond-expr","locations":[{"start":{"line":8,"column":66},"end":{"line":8,"column":78}},{"start":{"line":8,"column":81},"end":{"line":8,"column":88}}],"line":8},"1":{"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":63}},"type":"binary-expr","locations":[{"start":{"line":8,"column":13},"end":{"line":8,"column":33}},{"start":{"line":8,"column":37},"end":{"line":8,"column":63}}],"line":8},"2":{"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":94}},"type":"cond-expr","locations":[{"start":{"line":10,"column":68},"end":{"line":10,"column":70}},{"start":{"line":10,"column":73},"end":{"line":10,"column":94}}],"line":10},"3":{"loc":{"start":{"line":20,"column":6},"end":{"line":22,"column":7}},"type":"if","locations":[{"start":{"line":20,"column":6},"end":{"line":22,"column":7}},{"start":{"line":20,"column":6},"end":{"line":22,"column":7}}],"line":20},"4":{"loc":{"start":{"line":25,"column":6},"end":{"line":30,"column":7}},"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":30,"column":7}},{"start":{"line":25,"column":6},"end":{"line":30,"column":7}}],"line":25},"5":{"loc":{"start":{"line":45,"column":46},"end":{"line":45,"column":92}},"type":"cond-expr","locations":[{"start":{"line":45,"column":70},"end":{"line":45,"column":73}},{"start":{"line":45,"column":76},"end":{"line":45,"column":92}}],"line":45},"6":{"loc":{"start":{"line":45,"column":46},"end":{"line":45,"column":67}},"type":"binary-expr","locations":[{"start":{"line":45,"column":46},"end":{"line":45,"column":49}},{"start":{"line":45,"column":53},"end":{"line":45,"column":67}}],"line":45}},"s":{"0":1,"1":1,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":2,"10":6,"11":6,"12":0,"13":6,"14":6,"15":2,"16":2,"17":4,"18":1,"19":1,"20":1,"21":1,"22":1,"23":2},"f":{"0":2,"1":6,"2":6,"3":2},"b":{"0":[2,0],"1":[2,2],"2":[0,2],"3":[0,6],"4":[2,4],"5":[0,2],"6":[2,2]},"inputSourceMap":{"version":3,"sources":["rateLimit.js"],"names":["client","options","jwksRequestsPerMinute","logger","getSigningKey","limiter","RateLimiter","kid","cb","removeTokens","err","remaining","JwksRateLimitError"],"mappings":";;;;;;kBAKe,UAASA,MAAT,EAA2D;AAAA,iFAATC,OAAS;AAAA,mCAAxCC,qBAAwC;AAAA,MAAxCA,qBAAwC,yCAAhB,EAAgB;;AACxE,MAAMC,SAAS,qBAAM,MAAN,CAAf;AACA,MAAMC,gBAAgBJ,OAAOI,aAA7B;;AAEA,MAAMC,UAAU,IAAIC,oBAAJ,CAAgBJ,qBAAhB,EAAuC,QAAvC,EAAiD,IAAjD,CAAhB;AACAC,2DAAuDD,qBAAvD;;AAEA,SAAO,UAACK,GAAD,EAAMC,EAAN,EAAa;AAClBH,YAAQI,YAAR,CAAqB,CAArB,EAAwB,UAACC,GAAD,EAAMC,SAAN,EAAoB;AAC1C,UAAID,GAAJ,EAAS;AACP,eAAOF,GAAGE,GAAH,CAAP;AACD;;AAEDP,aAAO,8DAAP,EAAuEQ,SAAvE;AACA,UAAIA,YAAY,CAAhB,EAAmB;AACjBR,eAAO,wCAAP;AACA,eAAOK,GAAG,IAAII,4BAAJ,CAAuB,wCAAvB,CAAH,CAAP;AACD,OAHD,MAGO;AACL,eAAOR,cAAcG,GAAd,EAAmBC,EAAnB,CAAP;AACD;AACF,KAZD;AAaD,GAdD;AAeD,C;;AA3BD;;;;AACA;;AAEA","file":"rateLimit.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/wrappers","sourcesContent":["import debug from 'debug';\nimport { RateLimiter } from 'limiter';\n\nimport JwksRateLimitError from '../errors/JwksRateLimitError';\n\nexport default function(client, { jwksRequestsPerMinute = 10 } = options) {\n  const logger = debug('jwks');\n  const getSigningKey = client.getSigningKey;\n\n  const limiter = new RateLimiter(jwksRequestsPerMinute, 'minute', true);\n  logger(`Configured rate limiting to JWKS endpoint at ${jwksRequestsPerMinute}/minute`);\n\n  return (kid, cb) => {\n    limiter.removeTokens(1, (err, remaining) => {\n      if (err) {\n        return cb(err);\n      }\n\n      logger('Requests to the JWKS endpoint available for the next minute:', remaining);\n      if (remaining < 0) {\n        logger('Too many requests to the JWKS endpoint');\n        return cb(new JwksRateLimitError('Too many requests to the JWKS endpoint'));\n      } else {\n        return getSigningKey(kid, cb);\n      }\n    });\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1fe141094aab980f62d9b4f493d27a09c92247c7","contentHash":"e2119e671bb0aaccbc4818ed7790049cd84bfb8cd551a1ee32449ad99dbe1f5e"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/JwksRateLimitError.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/JwksRateLimitError.js","statementMap":{"0":{"start":{"line":4,"column":2},"end":{"line":4,"column":28}},"1":{"start":{"line":5,"column":2},"end":{"line":5,"column":50}},"2":{"start":{"line":6,"column":2},"end":{"line":6,"column":35}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":25}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":62}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":36}}},"fnMap":{"0":{"name":"JwksRateLimitError","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":27}},"loc":{"start":{"line":3,"column":37},"end":{"line":8,"column":1}},"line":3}},"branchMap":{},"s":{"0":3,"1":3,"2":3,"3":3,"4":1,"5":1,"6":1},"f":{"0":3},"b":{},"inputSourceMap":{"version":3,"sources":["JwksRateLimitError.js"],"names":["JwksRateLimitError","message","Error","call","captureStackTrace","constructor","name","prototype","Object","create","module","exports"],"mappings":";;AAAA,SAASA,kBAAT,CAA4BC,OAA5B,EAAqC;AACnCC,QAAMC,IAAN,CAAW,IAAX,EAAiBF,OAAjB;AACAC,QAAME,iBAAN,CAAwB,IAAxB,EAA8B,KAAKC,WAAnC;AACA,OAAKC,IAAL,GAAY,oBAAZ;AACA,OAAKL,OAAL,GAAeA,OAAf;AACD;;AAEDD,mBAAmBO,SAAnB,GAA+BC,OAAOC,MAAP,CAAcP,MAAMK,SAApB,CAA/B;AACAP,mBAAmBO,SAAnB,CAA6BF,WAA7B,GAA2CL,kBAA3C;AACAU,OAAOC,OAAP,GAAiBX,kBAAjB","file":"JwksRateLimitError.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors","sourcesContent":["function JwksRateLimitError(message) {\n  Error.call(this, message);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = 'JwksRateLimitError';\n  this.message = message;\n}\n\nJwksRateLimitError.prototype = Object.create(Error.prototype);\nJwksRateLimitError.prototype.constructor = JwksRateLimitError;\nmodule.exports = JwksRateLimitError;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"658d436d88ded21f44a8a806379f755f02018b89","contentHash":"34d4c71ea348a60961668e734c50d18c115a716122181b2f9885c048d53281cf"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/index.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors/index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":117}},"2":{"start":{"line":8,"column":22},"end":{"line":8,"column":48}},"3":{"start":{"line":10,"column":22},"end":{"line":10,"column":61}},"4":{"start":{"line":12,"column":18},"end":{"line":12,"column":40}},"5":{"start":{"line":14,"column":18},"end":{"line":14,"column":53}},"6":{"start":{"line":16,"column":27},"end":{"line":16,"column":58}},"7":{"start":{"line":18,"column":27},"end":{"line":18,"column":71}},"8":{"start":{"line":20,"column":32},"end":{"line":20,"column":68}},"9":{"start":{"line":22,"column":32},"end":{"line":22,"column":81}},"10":{"start":{"line":24,"column":39},"end":{"line":24,"column":93}},"11":{"start":{"line":26,"column":0},"end":{"line":26,"column":48}},"12":{"start":{"line":27,"column":0},"end":{"line":27,"column":40}},"13":{"start":{"line":28,"column":0},"end":{"line":28,"column":58}},"14":{"start":{"line":29,"column":0},"end":{"line":29,"column":68}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":31}},"loc":{"start":{"line":24,"column":37},"end":{"line":24,"column":95}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":46},"end":{"line":24,"column":92}},"type":"cond-expr","locations":[{"start":{"line":24,"column":70},"end":{"line":24,"column":73}},{"start":{"line":24,"column":76},"end":{"line":24,"column":92}}],"line":24},"1":{"loc":{"start":{"line":24,"column":46},"end":{"line":24,"column":67}},"type":"binary-expr","locations":[{"start":{"line":24,"column":46},"end":{"line":24,"column":49}},{"start":{"line":24,"column":53},"end":{"line":24,"column":67}}],"line":24}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":4,"11":1,"12":1,"13":1,"14":1},"f":{"0":4},"b":{"0":[0,4],"1":[4,4]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["ArgumentError","JwksError","JwksRateLimitError","SigningKeyNotFoundError"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;QAAOA,a;QACAC,S;QACAC,kB;QACAC,uB","file":"index.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/errors","sourcesContent":["export ArgumentError from './ArgumentError';\nexport JwksError from './JwksError';\nexport JwksRateLimitError from './JwksRateLimitError';\nexport SigningKeyNotFoundError from './SigningKeyNotFoundError';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a462b00037de3579ea526e610f01c6c1149bf59c","contentHash":"de742bfc7e9deb8cca8df6cf76de483a0f851a2915ef5fbffe6a8274e5ef53d7"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/hapi.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/hapi.js","statementMap":{"0":{"start":{"line":3,"column":14},"end":{"line":3,"column":34}},"1":{"start":{"line":5,"column":18},"end":{"line":5,"column":42}},"2":{"start":{"line":7,"column":28},"end":{"line":17,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":11,"column":3}},"4":{"start":{"line":10,"column":4},"end":{"line":10,"column":31}},"5":{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},"6":{"start":{"line":15,"column":4},"end":{"line":15,"column":31}},"7":{"start":{"line":24,"column":0},"end":{"line":34,"column":2}},"8":{"start":{"line":25,"column":23},"end":{"line":25,"column":58}},"9":{"start":{"line":26,"column":2},"end":{"line":33,"column":4}},"10":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"11":{"start":{"line":28,"column":15},"end":{"line":30,"column":7}},"12":{"start":{"line":29,"column":8},"end":{"line":29,"column":58}},"13":{"start":{"line":31,"column":6},"end":{"line":31,"column":34}},"14":{"start":{"line":36,"column":0},"end":{"line":66,"column":2}},"15":{"start":{"line":37,"column":2},"end":{"line":39,"column":3}},"16":{"start":{"line":38,"column":4},"end":{"line":38,"column":104}},"17":{"start":{"line":41,"column":15},"end":{"line":41,"column":50}},"18":{"start":{"line":42,"column":16},"end":{"line":42,"column":70}},"19":{"start":{"line":44,"column":2},"end":{"line":65,"column":4}},"20":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"21":{"start":{"line":47,"column":6},"end":{"line":47,"column":98}},"22":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},"23":{"start":{"line":52,"column":6},"end":{"line":52,"column":135}},"24":{"start":{"line":55,"column":4},"end":{"line":64,"column":7}},"25":{"start":{"line":56,"column":6},"end":{"line":60,"column":7}},"26":{"start":{"line":57,"column":8},"end":{"line":59,"column":11}},"27":{"start":{"line":58,"column":10},"end":{"line":58,"column":42}},"28":{"start":{"line":63,"column":6},"end":{"line":63,"column":62}}},"fnMap":{"0":{"name":"handleSigningKeyError","decl":{"start":{"line":7,"column":37},"end":{"line":7,"column":58}},"loc":{"start":{"line":7,"column":68},"end":{"line":17,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":24,"column":34},"end":{"line":24,"column":35}},"loc":{"start":{"line":24,"column":53},"end":{"line":34,"column":1}},"line":24},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":10}},"loc":{"start":{"line":26,"column":28},"end":{"line":33,"column":3}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":23},"end":{"line":27,"column":24}},"loc":{"start":{"line":27,"column":50},"end":{"line":32,"column":5}},"line":27},"4":{"name":"cb","decl":{"start":{"line":28,"column":24},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":37},"end":{"line":30,"column":7}},"line":28},"5":{"name":"(anonymous_5)","decl":{"start":{"line":36,"column":29},"end":{"line":36,"column":30}},"loc":{"start":{"line":36,"column":48},"end":{"line":66,"column":1}},"line":36},"6":{"name":"secretProvider","decl":{"start":{"line":44,"column":18},"end":{"line":44,"column":32}},"loc":{"start":{"line":44,"column":46},"end":{"line":65,"column":3}},"line":44},"7":{"name":"(anonymous_7)","decl":{"start":{"line":55,"column":45},"end":{"line":55,"column":46}},"loc":{"start":{"line":55,"column":65},"end":{"line":64,"column":5}},"line":55},"8":{"name":"(anonymous_8)","decl":{"start":{"line":57,"column":28},"end":{"line":57,"column":29}},"loc":{"start":{"line":57,"column":48},"end":{"line":59,"column":9}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":2},"end":{"line":11,"column":3}},"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":11,"column":3}},{"start":{"line":9,"column":2},"end":{"line":11,"column":3}}],"line":9},"1":{"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":51}},"type":"binary-expr","locations":[{"start":{"line":9,"column":6},"end":{"line":9,"column":9}},{"start":{"line":9,"column":13},"end":{"line":9,"column":51}}],"line":9},"2":{"loc":{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},{"start":{"line":14,"column":2},"end":{"line":16,"column":3}}],"line":14},"3":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":57}},"type":"cond-expr","locations":[{"start":{"line":29,"column":22},"end":{"line":29,"column":33}},{"start":{"line":29,"column":36},"end":{"line":29,"column":57}}],"line":29},"4":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":19}},"type":"binary-expr","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":12}},{"start":{"line":29,"column":16},"end":{"line":29,"column":19}}],"line":29},"5":{"loc":{"start":{"line":37,"column":2},"end":{"line":39,"column":3}},"type":"if","locations":[{"start":{"line":37,"column":2},"end":{"line":39,"column":3}},{"start":{"line":37,"column":2},"end":{"line":39,"column":3}}],"line":37},"6":{"loc":{"start":{"line":37,"column":6},"end":{"line":37,"column":47}},"type":"binary-expr","locations":[{"start":{"line":37,"column":6},"end":{"line":37,"column":22}},{"start":{"line":37,"column":26},"end":{"line":37,"column":47}}],"line":37},"7":{"loc":{"start":{"line":42,"column":16},"end":{"line":42,"column":70}},"type":"binary-expr","locations":[{"start":{"line":42,"column":16},"end":{"line":42,"column":45}},{"start":{"line":42,"column":49},"end":{"line":42,"column":70}}],"line":42},"8":{"loc":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},{"start":{"line":46,"column":4},"end":{"line":48,"column":5}}],"line":46},"9":{"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},"type":"binary-expr","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":16}},{"start":{"line":46,"column":20},"end":{"line":46,"column":35}}],"line":46},"10":{"loc":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},"type":"if","locations":[{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},{"start":{"line":51,"column":4},"end":{"line":53,"column":5}}],"line":51},"11":{"loc":{"start":{"line":56,"column":6},"end":{"line":60,"column":7}},"type":"if","locations":[{"start":{"line":56,"column":6},"end":{"line":60,"column":7}},{"start":{"line":56,"column":6},"end":{"line":60,"column":7}}],"line":56},"12":{"loc":{"start":{"line":63,"column":22},"end":{"line":63,"column":55}},"type":"binary-expr","locations":[{"start":{"line":63,"column":22},"end":{"line":63,"column":35}},{"start":{"line":63,"column":39},"end":{"line":63,"column":55}}],"line":63}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"sources":["hapi.js"],"names":["handleSigningKeyError","err","cb","name","module","exports","hapiJwt2KeyAsync","options","secretProvider","hapiJwt2Key","decoded","Promise","resolve","reject","key","undefined","ArgumentError","client","JwksClient","onError","header","Error","alg","getSigningKey","kid","newError","publicKey","rsaPublicKey"],"mappings":";;AAAA;;AACA;;AAEA,IAAMA,wBAAwB,SAAxBA,qBAAwB,CAACC,GAAD,EAAMC,EAAN,EAAa;AACzC;AACA,MAAID,OAAOA,IAAIE,IAAJ,KAAa,yBAAxB,EAAmD;AACjD,WAAOD,GAAGD,GAAH,EAAQ,IAAR,EAAc,IAAd,CAAP;AACD;;AAED;AACA,MAAIA,GAAJ,EAAS;AACP,WAAOC,GAAGD,GAAH,EAAQ,IAAR,EAAc,IAAd,CAAP;AACD;AACF,CAVD;;AAYA;;;;;AAKAG,OAAOC,OAAP,CAAeC,gBAAf,GAAkC,UAACC,OAAD,EAAa;AAC7C,MAAMC,iBAAiBJ,OAAOC,OAAP,CAAeI,WAAf,CAA2BF,OAA3B,CAAvB;AACA,SAAO,UAASG,OAAT,EAAkB;AACvB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAMX,KAAK,SAALA,EAAK,CAACD,GAAD,EAAMa,GAAN,EAAc;AACtB,SAACA,GAAD,IAAQb,GAAT,GAAgBY,OAAOZ,GAAP,CAAhB,GAA8BW,QAAQ,EAAEE,QAAF,EAAR,CAA9B;AACD,OAFD;AAGAN,qBAAeE,OAAf,EAAwBR,EAAxB;AACD,KALM,CAAP;AAMD,GAPD;AAQD,CAVD;;AAYAE,OAAOC,OAAP,CAAeI,WAAf,GAA6B,UAACF,OAAD,EAAa;AACxC,MAAIA,YAAY,IAAZ,IAAoBA,YAAYQ,SAApC,EAA+C;AAC7C,UAAM,IAAIC,qBAAJ,CAAkB,kEAAlB,CAAN;AACD;;AAED,MAAMC,SAAS,IAAIC,sBAAJ,CAAeX,OAAf,CAAf;AACA,MAAMY,UAAUZ,QAAQP,qBAAR,IAAiCA,qBAAjD;;AAEA,SAAO,SAASQ,cAAT,CAAwBE,OAAxB,EAAiCR,EAAjC,EAAqC;AAC1C;AACA,QAAI,CAACQ,OAAD,IAAY,CAACA,QAAQU,MAAzB,EAAiC;AAC/B,aAAOlB,GAAG,IAAImB,KAAJ,CAAU,yDAAV,CAAH,EAAyE,IAAzE,EAA+E,IAA/E,CAAP;AACD;;AAED;AACA,QAAIX,QAAQU,MAAR,CAAeE,GAAf,KAAuB,OAA3B,EAAoC;AAClC,aAAOpB,GAAG,IAAImB,KAAJ,CAAU,2BAA2BX,QAAQU,MAAR,CAAeE,GAA1C,GAAgD,8CAA1D,CAAH,EAA8G,IAA9G,EAAoH,IAApH,CAAP;AACD;;AAEDL,WAAOM,aAAP,CAAqBb,QAAQU,MAAR,CAAeI,GAApC,EAAyC,UAACvB,GAAD,EAAMa,GAAN,EAAc;AACrD,UAAIb,GAAJ,EAAS;AACP,eAAOkB,QAAQlB,GAAR,EAAa,UAACwB,QAAD;AAAA,iBAAcvB,GAAGuB,QAAH,EAAa,IAAb,EAAmB,IAAnB,CAAd;AAAA,SAAb,CAAP;AACD;;AAED;AACA,aAAOvB,GAAG,IAAH,EAASY,IAAIY,SAAJ,IAAiBZ,IAAIa,YAA9B,EAA4Cb,GAA5C,CAAP;AACD,KAPD;AAQD,GAnBD;AAoBD,CA5BD","file":"hapi.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations","sourcesContent":["import { ArgumentError } from '../errors';\nimport { JwksClient } from '../JwksClient';\n\nconst handleSigningKeyError = (err, cb) => {\n  // If we didn't find a match, can't provide a key.\n  if (err && err.name === 'SigningKeyNotFoundError') {\n    return cb(err, null, null);\n  }\n\n  // If an error occured like rate limiting or HTTP issue, we'll bubble up the error.\n  if (err) {\n    return cb(err, null, null);\n  }\n};\n\n/**\n * Call hapiJwt2Key as a Promise\n * @param {object} options \n * @returns {Promise}\n */\nmodule.exports.hapiJwt2KeyAsync = (options) => {\n  const secretProvider = module.exports.hapiJwt2Key(options);\n  return function(decoded) {\n    return new Promise((resolve, reject) => {\n      const cb = (err, key) => {\n        (!key || err) ? reject(err) : resolve({ key });\n      };\n      secretProvider(decoded, cb);\n    });\n  };\n}; \n\nmodule.exports.hapiJwt2Key = (options) => {\n  if (options === null || options === undefined) {\n    throw new ArgumentError('An options object must be provided when initializing hapiJwt2Key');\n  }\n\n  const client = new JwksClient(options);\n  const onError = options.handleSigningKeyError || handleSigningKeyError;\n\n  return function secretProvider(decoded, cb) {\n    // We cannot find a signing certificate if there is no header (no kid).\n    if (!decoded || !decoded.header) {\n      return cb(new Error('Cannot find a signing certificate if there is no header'), null, null);\n    }\n\n    // Only RS256 is supported.\n    if (decoded.header.alg !== 'RS256') {\n      return cb(new Error('Unsupported algorithm ' + decoded.header.alg + ' supplied. node-jwks-rsa supports only RS256'), null, null);\n    }\n\n    client.getSigningKey(decoded.header.kid, (err, key) => {\n      if (err) {\n        return onError(err, (newError) => cb(newError, null, null));\n      }\n\n      // Provide the key.\n      return cb(null, key.publicKey || key.rsaPublicKey, key);\n    });\n  };\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"176ef2f9158ad30b2b67783bb484134fff409870","contentHash":"384d036e87f2543800dc80955f6a48a6d0dcc2d1805fa3623958a084a98b44ee"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/express.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/express.js","statementMap":{"0":{"start":{"line":3,"column":14},"end":{"line":3,"column":34}},"1":{"start":{"line":5,"column":18},"end":{"line":5,"column":42}},"2":{"start":{"line":7,"column":28},"end":{"line":17,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":11,"column":3}},"4":{"start":{"line":10,"column":4},"end":{"line":10,"column":20}},"5":{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},"6":{"start":{"line":15,"column":4},"end":{"line":15,"column":19}},"7":{"start":{"line":19,"column":0},"end":{"line":44,"column":2}},"8":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"9":{"start":{"line":21,"column":4},"end":{"line":21,"column":109}},"10":{"start":{"line":24,"column":15},"end":{"line":24,"column":50}},"11":{"start":{"line":25,"column":16},"end":{"line":25,"column":70}},"12":{"start":{"line":27,"column":2},"end":{"line":43,"column":4}},"13":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"14":{"start":{"line":30,"column":6},"end":{"line":30,"column":28}},"15":{"start":{"line":33,"column":4},"end":{"line":42,"column":7}},"16":{"start":{"line":34,"column":6},"end":{"line":38,"column":7}},"17":{"start":{"line":35,"column":8},"end":{"line":37,"column":11}},"18":{"start":{"line":36,"column":10},"end":{"line":36,"column":36}},"19":{"start":{"line":41,"column":6},"end":{"line":41,"column":57}}},"fnMap":{"0":{"name":"handleSigningKeyError","decl":{"start":{"line":7,"column":37},"end":{"line":7,"column":58}},"loc":{"start":{"line":7,"column":68},"end":{"line":17,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":34},"end":{"line":19,"column":35}},"loc":{"start":{"line":19,"column":53},"end":{"line":44,"column":1}},"line":19},"2":{"name":"secretProvider","decl":{"start":{"line":27,"column":18},"end":{"line":27,"column":32}},"loc":{"start":{"line":27,"column":59},"end":{"line":43,"column":3}},"line":27},"3":{"name":"(anonymous_3)","decl":{"start":{"line":33,"column":37},"end":{"line":33,"column":38}},"loc":{"start":{"line":33,"column":57},"end":{"line":42,"column":5}},"line":33},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":28},"end":{"line":35,"column":29}},"loc":{"start":{"line":35,"column":48},"end":{"line":37,"column":9}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":2},"end":{"line":11,"column":3}},"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":11,"column":3}},{"start":{"line":9,"column":2},"end":{"line":11,"column":3}}],"line":9},"1":{"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":51}},"type":"binary-expr","locations":[{"start":{"line":9,"column":6},"end":{"line":9,"column":9}},{"start":{"line":9,"column":13},"end":{"line":9,"column":51}}],"line":9},"2":{"loc":{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},{"start":{"line":14,"column":2},"end":{"line":16,"column":3}}],"line":14},"3":{"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},{"start":{"line":20,"column":2},"end":{"line":22,"column":3}}],"line":20},"4":{"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":47}},"type":"binary-expr","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":22}},{"start":{"line":20,"column":26},"end":{"line":20,"column":47}}],"line":20},"5":{"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":70}},"type":"binary-expr","locations":[{"start":{"line":25,"column":16},"end":{"line":25,"column":45}},{"start":{"line":25,"column":49},"end":{"line":25,"column":70}}],"line":25},"6":{"loc":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},{"start":{"line":29,"column":4},"end":{"line":31,"column":5}}],"line":29},"7":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":41}},"type":"binary-expr","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":15}},{"start":{"line":29,"column":19},"end":{"line":29,"column":41}}],"line":29},"8":{"loc":{"start":{"line":34,"column":6},"end":{"line":38,"column":7}},"type":"if","locations":[{"start":{"line":34,"column":6},"end":{"line":38,"column":7}},{"start":{"line":34,"column":6},"end":{"line":38,"column":7}}],"line":34},"9":{"loc":{"start":{"line":41,"column":22},"end":{"line":41,"column":55}},"type":"binary-expr","locations":[{"start":{"line":41,"column":22},"end":{"line":41,"column":35}},{"start":{"line":41,"column":39},"end":{"line":41,"column":55}}],"line":41}},"s":{"0":1,"1":1,"2":1,"3":2,"4":2,"5":0,"6":0,"7":1,"8":9,"9":1,"10":8,"11":8,"12":8,"13":7,"14":2,"15":5,"16":5,"17":3,"18":3,"19":2},"f":{"0":2,"1":9,"2":7,"3":5,"4":3},"b":{"0":[2,0],"1":[2,2],"2":[0,0],"3":[1,8],"4":[9,9],"5":[8,6],"6":[2,5],"7":[7,6],"8":[3,2],"9":[2,0]},"inputSourceMap":{"version":3,"sources":["express.js"],"names":["handleSigningKeyError","err","cb","name","module","exports","expressJwtSecret","options","undefined","ArgumentError","client","JwksClient","onError","secretProvider","req","header","payload","alg","getSigningKey","kid","key","newError","publicKey","rsaPublicKey"],"mappings":";;AAAA;;AACA;;AAEA,IAAMA,wBAAwB,SAAxBA,qBAAwB,CAACC,GAAD,EAAMC,EAAN,EAAa;AACzC;AACA,MAAID,OAAOA,IAAIE,IAAJ,KAAa,yBAAxB,EAAmD;AACjD,WAAOD,GAAG,IAAH,CAAP;AACD;;AAED;AACA,MAAID,GAAJ,EAAS;AACP,WAAOC,GAAGD,GAAH,CAAP;AACD;AACF,CAVD;;AAYAG,OAAOC,OAAP,CAAeC,gBAAf,GAAkC,UAACC,OAAD,EAAa;AAC7C,MAAIA,YAAY,IAAZ,IAAoBA,YAAYC,SAApC,EAA+C;AAC7C,UAAM,IAAIC,qBAAJ,CAAkB,uEAAlB,CAAN;AACD;;AAED,MAAMC,SAAS,IAAIC,sBAAJ,CAAeJ,OAAf,CAAf;AACA,MAAMK,UAAUL,QAAQP,qBAAR,IAAiCA,qBAAjD;;AAEA,SAAO,SAASa,cAAT,CAAwBC,GAAxB,EAA6BC,MAA7B,EAAqCC,OAArC,EAA8Cd,EAA9C,EAAkD;AACvD;AACA,QAAI,CAACa,MAAD,IAAWA,OAAOE,GAAP,KAAe,OAA9B,EAAuC;AACrC,aAAOf,GAAG,IAAH,EAAS,IAAT,CAAP;AACD;;AAEDQ,WAAOQ,aAAP,CAAqBH,OAAOI,GAA5B,EAAiC,UAAClB,GAAD,EAAMmB,GAAN,EAAc;AAC7C,UAAInB,GAAJ,EAAS;AACP,eAAOW,QAAQX,GAAR,EAAa,UAACoB,QAAD;AAAA,iBAAcnB,GAAGmB,QAAH,EAAa,IAAb,CAAd;AAAA,SAAb,CAAP;AACD;;AAED;AACA,aAAOnB,GAAG,IAAH,EAASkB,IAAIE,SAAJ,IAAiBF,IAAIG,YAA9B,CAAP;AACD,KAPD;AAQD,GAdD;AAeD,CAvBD","file":"express.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations","sourcesContent":["import { ArgumentError } from '../errors';\nimport { JwksClient } from '../JwksClient';\n\nconst handleSigningKeyError = (err, cb) => {\n  // If we didn't find a match, can't provide a key.\n  if (err && err.name === 'SigningKeyNotFoundError') {\n    return cb(null);\n  }\n\n  // If an error occured like rate limiting or HTTP issue, we'll bubble up the error.\n  if (err) {\n    return cb(err);\n  }\n};\n\nmodule.exports.expressJwtSecret = (options) => {\n  if (options === null || options === undefined) {\n    throw new ArgumentError('An options object must be provided when initializing expressJwtSecret');\n  }\n\n  const client = new JwksClient(options);\n  const onError = options.handleSigningKeyError || handleSigningKeyError;\n\n  return function secretProvider(req, header, payload, cb) {\n    // Only RS256 is supported.\n    if (!header || header.alg !== 'RS256') {\n      return cb(null, null);\n    }\n\n    client.getSigningKey(header.kid, (err, key) => {\n      if (err) {\n        return onError(err, (newError) => cb(newError, null));\n      }\n\n      // Provide the key.\n      return cb(null, key.publicKey || key.rsaPublicKey);\n    });\n  };\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"23c36cb9202263d83c2ebd6e353922a621fc94b7","contentHash":"20f5291a9bdf10e0d1ee8b426321c9f39cafe35273799667b198a5b8e4e388ae"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/koa.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/koa.js","statementMap":{"0":{"start":{"line":3,"column":14},"end":{"line":3,"column":34}},"1":{"start":{"line":5,"column":18},"end":{"line":5,"column":42}},"2":{"start":{"line":7,"column":0},"end":{"line":44,"column":2}},"3":{"start":{"line":8,"column":16},"end":{"line":8,"column":86}},"4":{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},"5":{"start":{"line":12,"column":4},"end":{"line":12,"column":60}},"6":{"start":{"line":15,"column":15},"end":{"line":15,"column":50}},"7":{"start":{"line":17,"column":2},"end":{"line":43,"column":4}},"8":{"start":{"line":18,"column":15},"end":{"line":18,"column":85}},"9":{"start":{"line":19,"column":14},"end":{"line":19,"column":22}},"10":{"start":{"line":20,"column":14},"end":{"line":20,"column":22}},"11":{"start":{"line":22,"column":4},"end":{"line":42,"column":7}},"12":{"start":{"line":25,"column":6},"end":{"line":27,"column":7}},"13":{"start":{"line":26,"column":8},"end":{"line":26,"column":70}},"14":{"start":{"line":29,"column":6},"end":{"line":41,"column":9}},"15":{"start":{"line":30,"column":8},"end":{"line":37,"column":9}},"16":{"start":{"line":32,"column":10},"end":{"line":34,"column":11}},"17":{"start":{"line":33,"column":12},"end":{"line":33,"column":67}},"18":{"start":{"line":36,"column":10},"end":{"line":36,"column":29}},"19":{"start":{"line":40,"column":8},"end":{"line":40,"column":51}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":30},"end":{"line":7,"column":31}},"loc":{"start":{"line":7,"column":42},"end":{"line":44,"column":1}},"line":7},"1":{"name":"secretProvider","decl":{"start":{"line":17,"column":18},"end":{"line":17,"column":32}},"loc":{"start":{"line":17,"column":35},"end":{"line":43,"column":3}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":23},"end":{"line":22,"column":24}},"loc":{"start":{"line":22,"column":50},"end":{"line":42,"column":5}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":32},"end":{"line":29,"column":33}},"loc":{"start":{"line":29,"column":52},"end":{"line":41,"column":7}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":86}},"type":"cond-expr","locations":[{"start":{"line":8,"column":69},"end":{"line":8,"column":81}},{"start":{"line":8,"column":84},"end":{"line":8,"column":86}}],"line":8},"1":{"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":66}},"type":"binary-expr","locations":[{"start":{"line":8,"column":16},"end":{"line":8,"column":36}},{"start":{"line":8,"column":40},"end":{"line":8,"column":66}}],"line":8},"2":{"loc":{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},{"start":{"line":11,"column":2},"end":{"line":13,"column":3}}],"line":11},"3":{"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":85}},"type":"cond-expr","locations":[{"start":{"line":18,"column":68},"end":{"line":18,"column":80}},{"start":{"line":18,"column":83},"end":{"line":18,"column":85}}],"line":18},"4":{"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":65}},"type":"binary-expr","locations":[{"start":{"line":18,"column":15},"end":{"line":18,"column":35}},{"start":{"line":18,"column":39},"end":{"line":18,"column":65}}],"line":18},"5":{"loc":{"start":{"line":25,"column":6},"end":{"line":27,"column":7}},"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":27,"column":7}},{"start":{"line":25,"column":6},"end":{"line":27,"column":7}}],"line":25},"6":{"loc":{"start":{"line":30,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":37,"column":9}},{"start":{"line":30,"column":8},"end":{"line":37,"column":9}}],"line":30},"7":{"loc":{"start":{"line":32,"column":10},"end":{"line":34,"column":11}},"type":"if","locations":[{"start":{"line":32,"column":10},"end":{"line":34,"column":11}},{"start":{"line":32,"column":10},"end":{"line":34,"column":11}}],"line":32},"8":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":49}},"type":"binary-expr","locations":[{"start":{"line":40,"column":16},"end":{"line":40,"column":29}},{"start":{"line":40,"column":33},"end":{"line":40,"column":49}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":9,"4":9,"5":1,"6":8,"7":8,"8":6,"9":6,"10":6,"11":6,"12":6,"13":1,"14":5,"15":5,"16":3,"17":1,"18":2,"19":2},"f":{"0":9,"1":6,"2":6,"3":5},"b":{"0":[8,1],"1":[9,8],"2":[1,8],"3":[6,0],"4":[6,6],"5":[1,5],"6":[3,2],"7":[1,2],"8":[2,0]},"inputSourceMap":{"version":3,"sources":["koa.js"],"names":["module","exports","koaJwtSecret","options","jwksUri","ArgumentError","client","JwksClient","secretProvider","alg","kid","Promise","resolve","reject","Error","getSigningKey","err","key","handleSigningKeyError","then","publicKey","rsaPublicKey"],"mappings":";;AAAA;;AACA;;AAEAA,OAAOC,OAAP,CAAeC,YAAf,GAA8B,YAAkB;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;;;AAE9C,MAAI,CAACA,QAAQC,OAAb,EAAsB;AACpB,UAAM,IAAIC,qBAAJ,CAAkB,sBAAlB,CAAN;AACD;;AAED,MAAMC,SAAS,IAAIC,sBAAJ,CAAeJ,OAAf,CAAf;;AAEA,SAAO,SAASK,cAAT,GAA2C;AAAA,mFAAJ,EAAI;AAAA,QAAjBC,GAAiB,QAAjBA,GAAiB;AAAA,QAAZC,GAAY,QAAZA,GAAY;;AAEhD,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;;AAEtC;AACA,UAAIJ,QAAQ,OAAZ,EAAqB;AACnB,eAAOI,OAAO,IAAIC,KAAJ,CAAU,mCAAV,CAAP,CAAP;AACD;;AAEDR,aAAOS,aAAP,CAAqBL,GAArB,EAA0B,UAACM,GAAD,EAAMC,GAAN,EAAc;AACtC,YAAID,GAAJ,EAAS;;AAEP,cAAIb,QAAQe,qBAAZ,EAAmC;AACjC,mBAAOf,QAAQe,qBAAR,CAA8BF,GAA9B,EACJG,IADI,CACCN,MADD,CAAP;AAED;;AAED,iBAAOA,OAAOG,GAAP,CAAP;AACD;;AAED;AACAJ,gBAAQK,IAAIG,SAAJ,IAAiBH,IAAII,YAA7B;AACD,OAbD;AAcD,KArBM,CAAP;AAsBD,GAxBD;AAyBD,CAjCD","file":"koa.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations","sourcesContent":["import { ArgumentError } from '../errors';\nimport { JwksClient } from '../JwksClient';\n\nmodule.exports.koaJwtSecret = (options = {}) => {\n\n  if (!options.jwksUri) {\n    throw new ArgumentError('No JWKS URI provided');\n  }\n\n  const client = new JwksClient(options);\n\n  return function secretProvider({ alg, kid } = {}) {\n\n    return new Promise((resolve, reject) => {\n\n      // Only RS256 is supported.\n      if (alg !== 'RS256') {\n        return reject(new Error('Missing / invalid token algorithm'));\n      }\n\n      client.getSigningKey(kid, (err, key) => {\n        if (err) {\n\n          if (options.handleSigningKeyError) {\n            return options.handleSigningKeyError(err)\n              .then(reject);\n          }\n\n          return reject(err);\n        }\n\n        // Provide the key.\n        resolve(key.publicKey || key.rsaPublicKey);\n      });\n    });\n  };\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e3084835c274d66bba2865bc4cde259ee5a3ddc5","contentHash":"833fa37805961f305d265baa49219f7ece95e11a194c53e68be71834c27c6e3b"},"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/passport.js":{"path":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations/passport.js","statementMap":{"0":{"start":{"line":3,"column":20},"end":{"line":3,"column":43}},"1":{"start":{"line":5,"column":21},"end":{"line":5,"column":58}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":34}},"3":{"start":{"line":9,"column":18},"end":{"line":9,"column":42}},"4":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"5":{"start":{"line":13,"column":28},"end":{"line":23,"column":1}},"6":{"start":{"line":15,"column":2},"end":{"line":17,"column":3}},"7":{"start":{"line":16,"column":4},"end":{"line":16,"column":20}},"8":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"9":{"start":{"line":21,"column":4},"end":{"line":21,"column":19}},"10":{"start":{"line":25,"column":0},"end":{"line":52,"column":2}},"11":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"12":{"start":{"line":27,"column":4},"end":{"line":27,"column":110}},"13":{"start":{"line":30,"column":15},"end":{"line":30,"column":50}},"14":{"start":{"line":31,"column":16},"end":{"line":31,"column":70}},"15":{"start":{"line":33,"column":2},"end":{"line":51,"column":4}},"16":{"start":{"line":34,"column":18},"end":{"line":34,"column":80}},"17":{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},"18":{"start":{"line":38,"column":6},"end":{"line":38,"column":28}},"19":{"start":{"line":41,"column":4},"end":{"line":50,"column":7}},"20":{"start":{"line":42,"column":6},"end":{"line":46,"column":7}},"21":{"start":{"line":43,"column":8},"end":{"line":45,"column":11}},"22":{"start":{"line":44,"column":10},"end":{"line":44,"column":36}},"23":{"start":{"line":49,"column":6},"end":{"line":49,"column":57}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"handleSigningKeyError","decl":{"start":{"line":13,"column":37},"end":{"line":13,"column":58}},"loc":{"start":{"line":13,"column":68},"end":{"line":23,"column":1}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":35},"end":{"line":25,"column":36}},"loc":{"start":{"line":25,"column":54},"end":{"line":52,"column":1}},"line":25},"3":{"name":"secretProvider","decl":{"start":{"line":33,"column":18},"end":{"line":33,"column":32}},"loc":{"start":{"line":33,"column":55},"end":{"line":51,"column":3}},"line":33},"4":{"name":"(anonymous_4)","decl":{"start":{"line":41,"column":45},"end":{"line":41,"column":46}},"loc":{"start":{"line":41,"column":65},"end":{"line":50,"column":5}},"line":41},"5":{"name":"(anonymous_5)","decl":{"start":{"line":43,"column":28},"end":{"line":43,"column":29}},"loc":{"start":{"line":43,"column":48},"end":{"line":45,"column":9}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":15,"column":2},"end":{"line":17,"column":3}},"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":17,"column":3}},{"start":{"line":15,"column":2},"end":{"line":17,"column":3}}],"line":15},"3":{"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":51}},"type":"binary-expr","locations":[{"start":{"line":15,"column":6},"end":{"line":15,"column":9}},{"start":{"line":15,"column":13},"end":{"line":15,"column":51}}],"line":15},"4":{"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},{"start":{"line":20,"column":2},"end":{"line":22,"column":3}}],"line":20},"5":{"loc":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},{"start":{"line":26,"column":2},"end":{"line":28,"column":3}}],"line":26},"6":{"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":47}},"type":"binary-expr","locations":[{"start":{"line":26,"column":6},"end":{"line":26,"column":22}},{"start":{"line":26,"column":26},"end":{"line":26,"column":47}}],"line":26},"7":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":70}},"type":"binary-expr","locations":[{"start":{"line":31,"column":16},"end":{"line":31,"column":45}},{"start":{"line":31,"column":49},"end":{"line":31,"column":70}}],"line":31},"8":{"loc":{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},{"start":{"line":37,"column":4},"end":{"line":39,"column":5}}],"line":37},"9":{"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":69}},"type":"binary-expr","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":16}},{"start":{"line":37,"column":20},"end":{"line":37,"column":35}},{"start":{"line":37,"column":39},"end":{"line":37,"column":69}}],"line":37},"10":{"loc":{"start":{"line":42,"column":6},"end":{"line":46,"column":7}},"type":"if","locations":[{"start":{"line":42,"column":6},"end":{"line":46,"column":7}},{"start":{"line":42,"column":6},"end":{"line":46,"column":7}}],"line":42},"11":{"loc":{"start":{"line":49,"column":22},"end":{"line":49,"column":55}},"type":"binary-expr","locations":[{"start":{"line":49,"column":22},"end":{"line":49,"column":35}},{"start":{"line":49,"column":39},"end":{"line":49,"column":55}}],"line":49}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":2,"8":0,"9":0,"10":1,"11":9,"12":1,"13":8,"14":8,"15":8,"16":7,"17":7,"18":2,"19":5,"20":5,"21":3,"22":3,"23":2},"f":{"0":1,"1":2,"2":9,"3":7,"4":5,"5":3},"b":{"0":[0,1],"1":[1,1],"2":[2,0],"3":[2,2],"4":[0,0],"5":[1,8],"6":[9,9],"7":[8,7],"8":[2,5],"9":[7,6,6],"10":[3,2],"11":[2,0]},"inputSourceMap":{"version":3,"sources":["passport.js"],"names":["handleSigningKeyError","err","cb","name","module","exports","passportJwtSecret","options","undefined","ArgumentError","client","JwksClient","onError","secretProvider","req","rawJwtToken","decoded","jwt","decode","complete","header","alg","getSigningKey","kid","key","newError","publicKey","rsaPublicKey"],"mappings":";;AAAA;;;;AACA;;AACA;;;;AAEA,IAAMA,wBAAwB,SAAxBA,qBAAwB,CAACC,GAAD,EAAMC,EAAN,EAAa;AACzC;AACA,MAAID,OAAOA,IAAIE,IAAJ,KAAa,yBAAxB,EAAmD;AACjD,WAAOD,GAAG,IAAH,CAAP;AACD;;AAED;AACA,MAAID,GAAJ,EAAS;AACP,WAAOC,GAAGD,GAAH,CAAP;AACD;AACF,CAVD;;AAYAG,OAAOC,OAAP,CAAeC,iBAAf,GAAmC,UAACC,OAAD,EAAa;AAC9C,MAAIA,YAAY,IAAZ,IAAoBA,YAAYC,SAApC,EAA+C;AAC7C,UAAM,IAAIC,qBAAJ,CAAkB,wEAAlB,CAAN;AACD;;AAED,MAAMC,SAAS,IAAIC,sBAAJ,CAAeJ,OAAf,CAAf;AACA,MAAMK,UAAUL,QAAQP,qBAAR,IAAiCA,qBAAjD;;AAEA,SAAO,SAASa,cAAT,CAAwBC,GAAxB,EAA6BC,WAA7B,EAA0Cb,EAA1C,EAA8C;AACnD,QAAMc,UAAUC,uBAAIC,MAAJ,CAAWH,WAAX,EAAwB,EAAEI,UAAU,IAAZ,EAAxB,CAAhB;;AAEA;AACA,QAAI,CAACH,OAAD,IAAY,CAACA,QAAQI,MAArB,IAA+BJ,QAAQI,MAAR,CAAeC,GAAf,KAAuB,OAA1D,EAAmE;AACjE,aAAOnB,GAAG,IAAH,EAAS,IAAT,CAAP;AACD;;AAEDQ,WAAOY,aAAP,CAAqBN,QAAQI,MAAR,CAAeG,GAApC,EAAyC,UAACtB,GAAD,EAAMuB,GAAN,EAAc;AACrD,UAAIvB,GAAJ,EAAS;AACP,eAAOW,QAAQX,GAAR,EAAa,UAACwB,QAAD;AAAA,iBAAcvB,GAAGuB,QAAH,EAAa,IAAb,CAAd;AAAA,SAAb,CAAP;AACD;;AAED;AACA,aAAOvB,GAAG,IAAH,EAASsB,IAAIE,SAAJ,IAAiBF,IAAIG,YAA9B,CAAP;AACD,KAPD;AAQD,GAhBD;AAiBD,CAzBD","file":"passport.js","sourceRoot":"/Users/lbalmaceda/NodeJS/node-jwks-rsa/src/integrations","sourcesContent":["import jwt from 'jsonwebtoken';\nimport { ArgumentError } from '../errors';\nimport { JwksClient } from '../JwksClient';\n\nconst handleSigningKeyError = (err, cb) => {\n  // If we didn't find a match, can't provide a key.\n  if (err && err.name === 'SigningKeyNotFoundError') {\n    return cb(null);\n  }\n\n  // If an error occured like rate limiting or HTTP issue, we'll bubble up the error.\n  if (err) {\n    return cb(err);\n  }\n};\n\nmodule.exports.passportJwtSecret = (options) => {\n  if (options === null || options === undefined) {\n    throw new ArgumentError('An options object must be provided when initializing passportJwtSecret');\n  }\n\n  const client = new JwksClient(options);\n  const onError = options.handleSigningKeyError || handleSigningKeyError;\n\n  return function secretProvider(req, rawJwtToken, cb) {\n    const decoded = jwt.decode(rawJwtToken, { complete: true })\n\n    // Only RS256 is supported.\n    if (!decoded || !decoded.header || decoded.header.alg !== 'RS256') {\n      return cb(null, null);\n    }\n\n    client.getSigningKey(decoded.header.kid, (err, key) => {\n      if (err) {\n        return onError(err, (newError) => cb(newError, null));\n      }\n\n      // Provide the key.\n      return cb(null, key.publicKey || key.rsaPublicKey);\n    });\n  };\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c46509a0e0643c000f1ad2c80549334151255559","contentHash":"7092486144e03c53f722d1c1fc06d222333f32e3021eef1e3974c7bf13fac535"}}