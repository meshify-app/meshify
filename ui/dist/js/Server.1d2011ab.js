(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Server"],{"1d74":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-content",[t("Server")],1)},i=[],l=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.server?t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-card",{attrs:{dark:""}},[t("v-card-title",[e._v(" Server's interface configuration ")]),t("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"Public key",disabled:""},model:{value:e.server.publicKey,callback:function(r){e.$set(e.server,"publicKey",r)},expression:"server.publicKey"}}),t("v-text-field",{attrs:{type:"number",rules:[function(e){return!!e||"Listen port is required"}],label:"Listen port",required:""},model:{value:e.server.listenPort,callback:function(r){e.$set(e.server,"listenPort",r)},expression:"server.listenPort"}}),t("v-combobox",{attrs:{chips:"",hint:"Write IPv4 or IPv6 CIDR and hit enter",label:"Server interface addresses",multiple:"",dark:""},scopedSlots:e._u([{key:"selection",fn:function(r){var s=r.attrs,i=r.item,l=r.select,a=r.selected;return[t("v-chip",e._b({attrs:{"input-value":a,close:""},on:{click:l,"click:close":function(r){e.server.address.splice(e.server.address.indexOf(i),1)}}},"v-chip",s,!1),[t("strong",[e._v(e._s(i))])])]}}],null,!1,4276791991),model:{value:e.server.address,callback:function(r){e.$set(e.server,"address",r)},expression:"server.address"}})],1)],1)],1)],1),t("v-col",{attrs:{cols:"12"}},[t("v-card",{attrs:{dark:""}},[t("v-card-title",[e._v(" Client's global configuration "),t("v-spacer"),t("v-btn",{attrs:{color:"warning"},on:{click:e.applyGlobals}},[e._v(" Apply globals to all clients "),t("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-update")])],1)],1),t("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"Public endpoint for clients to connect to",rules:[function(e){return!!e||"Public endpoint for clients to connect to is required"}],required:""},model:{value:e.server.endpoint,callback:function(r){e.$set(e.server,"endpoint",r)},expression:"server.endpoint"}}),t("v-combobox",{attrs:{chips:"",hint:"Write IPv4 or IPv6 address and hit enter",label:"DNS servers for clients",multiple:"",dark:""},scopedSlots:e._u([{key:"selection",fn:function(r){var s=r.attrs,i=r.item,l=r.select,a=r.selected;return[t("v-chip",e._b({attrs:{"input-value":a,close:""},on:{click:l,"click:close":function(r){e.server.dns.splice(e.server.dns.indexOf(i),1)}}},"v-chip",s,!1),[t("strong",[e._v(e._s(i))])])]}}],null,!1,2528479799),model:{value:e.server.dns,callback:function(r){e.$set(e.server,"dns",r)},expression:"server.dns"}}),t("v-combobox",{attrs:{chips:"",hint:"Write IPv4 or IPv6 address and hit enter",label:"Default Allowed IPs for clients",multiple:"",dark:""},scopedSlots:e._u([{key:"selection",fn:function(r){var s=r.attrs,i=r.item,l=r.select,a=r.selected;return[t("v-chip",e._b({attrs:{"input-value":a,close:""},on:{click:l,"click:close":function(r){e.server.allowedips.splice(e.server.allowedips.indexOf(i),1)}}},"v-chip",s,!1),[t("strong",[e._v(e._s(i))])])]}}],null,!1,3703533655),model:{value:e.server.allowedips,callback:function(r){e.$set(e.server,"allowedips",r)},expression:"server.allowedips"}}),t("v-text-field",{attrs:{type:"number",label:"Define global MTU",hint:"Leave at 0 and let wg-quick take care of MTU"},model:{value:e.server.mtu,callback:function(r){e.$set(e.server,"mtu",r)},expression:"server.mtu"}}),t("v-text-field",{attrs:{type:"number",label:"Persistent keepalive",hint:"Leave at 0 if you dont want to specify persistent keepalive"},model:{value:e.server.persistentKeepalive,callback:function(r){e.$set(e.server,"persistentKeepalive",r)},expression:"server.persistentKeepalive"}})],1)],1)],1)],1)],1),t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-card",{attrs:{dark:""}},[t("v-card-title",[e._v(" Interface configuration hooks ")]),t("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"PreUp: script snippets which will be executed by bash before setting up the interface"},model:{value:e.server.preUp,callback:function(r){e.$set(e.server,"preUp",r)},expression:"server.preUp"}}),t("v-text-field",{attrs:{label:"PostUp: script snippets which will be executed by bash after setting up the interface"},model:{value:e.server.postUp,callback:function(r){e.$set(e.server,"postUp",r)},expression:"server.postUp"}}),t("v-text-field",{attrs:{label:"PreDown: script snippets which will be executed by bash before setting down the interface"},model:{value:e.server.preDown,callback:function(r){e.$set(e.server,"preDown",r)},expression:"server.preDown"}}),t("v-text-field",{attrs:{label:"PostDown : script snippets which will be executed by bash after setting down the interface"},model:{value:e.server.postDown,callback:function(r){e.$set(e.server,"postDown",r)},expression:"server.postDown "}})],1)],1)],1)],1)],1),t("v-row",[t("v-divider",{attrs:{dark:""}}),t("v-btn",{staticClass:"ma-2",attrs:{color:"success"},on:{click:function(r){return e.forceFileDownload()}}},[e._v(" Download server configuration "),t("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-cloud-download-outline")])],1),t("v-spacer"),t("v-btn",{staticClass:"ma-2",attrs:{color:"warning"},on:{click:e.update}},[e._v(" Update server configuration "),t("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-update")])],1),t("v-divider",{attrs:{dark:""}})],1)],1):e._e()},a=[],n=t("2f62"),o={name:"Server",data:()=>({}),computed:{...Object(n["c"])({server:"server/server",config:"server/config",clients:"client/clients"})},mounted(){this.readServer()},methods:{...Object(n["b"])("server",{errorServer:"error",readServer:"read",updateServer:"update"}),...Object(n["b"])("client",{updateClient:"update"}),applyGlobals(){this.update(),this.clients.forEach(e=>{e.allowedips=this.server.allowedips,this.updateClient(e)})},update(){if(this.server.listenPort=parseInt(this.server.listenPort,10),this.server.persistentKeepalive=parseInt(this.server.persistentKeepalive,10),this.server.mtu=parseInt(this.server.mtu,10),this.server.address.length<1)this.errorServer("Please provide at least one valid CIDR address for server interface");else{for(let e=0;e<this.server.address.length;e++)if(0===this.$isCidr(this.server.address[e]))return void this.errorServer(`Invalid CIDR detected, please correct ${this.server.address[e]} before submitting`);for(let e=0;e<this.server.dns.length;e++)if(0===this.$isCidr(this.server.dns[e]+"/32"))return void this.errorServer(`Invalid IP detected, please correct ${this.server.dns[e]} before submitting`);if(this.server.allowedips.length<1)this.errorServer("Please provide at least one valid CIDR address for client allowed IPs");else{for(let e=0;e<this.server.allowedips.length;e++)if(0===this.$isCidr(this.server.allowedips[e]))return void this.errorServer("Invalid CIDR detected, please correct before submitting");this.updateServer(this.server)}}},forceFileDownload(){const e=window.URL.createObjectURL(new Blob([this.config])),r=document.createElement("a");r.href=e,r.setAttribute("download","wg0.conf"),document.body.appendChild(r),r.click()}}},c=o,v=t("2877"),d=t("6544"),p=t.n(d),u=t("8336"),f=t("b0af"),b=t("99d9"),h=t("cc20"),w=t("62ad"),m=t("2b5d"),k=t("a523"),x=t("ce7e"),g=t("132d"),_=t("0fd9"),C=t("2fa4"),P=t("8654"),y=Object(v["a"])(c,l,a,!1,null,null,null),I=y.exports;p()(y,{VBtn:u["a"],VCard:f["a"],VCardTitle:b["c"],VChip:h["a"],VCol:w["a"],VCombobox:m["a"],VContainer:k["a"],VDivider:x["a"],VIcon:g["a"],VRow:_["a"],VSpacer:C["a"],VTextField:P["a"]});var S={name:"server",components:{Server:I}},D=S,$=t("a75b"),U=Object(v["a"])(D,s,i,!1,null,null,null);r["default"]=U.exports;p()(U,{VContent:$["a"]})}}]);
//# sourceMappingURL=Server.1d2011ab.js.map